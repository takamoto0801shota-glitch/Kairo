# Kairo UI Principles (不変ルール)

このドキュメントはKairoのUI原則です。
一時的な対応ではなく、今後の実装・修正は必ず本原則を前提とします。
矛盾がある場合は本原則を最優先し、変更が必要ならユーザーに確認します。

## 1. 固定構造の原則
- ヘッダーは常に画面最上部に固定する。
- 入力欄（チャット入力）は常に画面最下部に固定する。
- 会話エリアのみがスクロールする。

## 2. 安定性優先の原則
- スクロールや再描画でUIが動いてはならない。
- 1pxでもズレる挙動はバグとして扱う。
- position/layout再計算が起きても上下移動禁止。

## 3. 横移動禁止
- 横スクロールは全面禁止。
- body / main / chat container のいずれでも横移動が発生してはいけない。
- viewport幅を超える要素が存在しないことを保証する。

## 4. 構造としてズレないレイアウト
「ズレたら直す」ではなく「ズレようがない構造」を採用する。
3レイヤー構造を厳守する：
- 上：固定ヘッダー
- 中：スクロールする会話エリア
- 下：固定入力欄

## 5. 拡張耐性
- サマリーカード・判定カード・将来UI追加後も構造が崩れないことを前提にする。

## サマリーカードの原則（Kairo）

### 1. 位置の原則
- サマリーカードは常にヘッダー直下に表示される。
- 会話ログの一部として扱ってはならない。

### 2. 固定の原則
- サマリーカードはスクロールしない。
- ヘッダーと同様に、画面上部に固定される。
- 表示／非表示の切り替えで他UIがズレてはいけない。
- judgeMeta.shouldJudge === true の場合のみ表示する。
- shouldJudge === false の場合は必ず非表示とする（残存不可）。

### 3. 情報階層の原則
サマリーカードは以下の階層に属する：
1. ヘッダー（常時）
2. サマリーカード（判定時のみ）
3. 会話ログ（スクロール）
4. 入力欄（常時）

この階層構造は将来のUI拡張後も維持されること。

### 4. 安心設計
- サマリーカードは「結論」と「安心」を最短距離で伝えるためのUIである。
- 見失う・流れる・探させる設計は禁止。

