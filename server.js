const express = require("express");
const cors = require("cors");
const OpenAI = require("openai");
const path = require("path");
require("dotenv").config();

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json());
app.use(express.static(path.join(__dirname, "public"))); // Serve static files from public directory

// Initialize OpenAI client
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

// Kairo system prompt
const SYSTEM_PROMPT = `ã‚ãªãŸã¯Kairoã¨ã„ã†ã€ä½“èª¿ãŒæ‚ªã„ã¨ãã®ä¸å®‰ã‚’å—ã‘æ­¢ã‚ã¦ãã‚Œã‚‹AIè–¬å±€ã§ã™ã€‚

ã€æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ã€‘
- è¿”ç­”ã¯å¿…ãšçŸ­ãï¼ˆ3-4è¡Œä»¥å†…ï¼‰
- è³ªå•å½¢å¼ã§ä¼šè©±ã‚’é€²ã‚ã‚‹
- åŒ»è€…ã£ã½ããªã„ã€äººé–“å‘³ã®ã‚ã‚‹è©±ã—æ–¹
- åˆ¤æ–­ã•ã‚Œãªã„ç©ºæ°—ã€æŠ¼ã—ä»˜ã‘ãŒã¾ã—ããªã„

ã€ç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­” - æœ€é‡è¦ã€‘
ç¾åœ¨ã®ä¼šè©±å±¥æ­´ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
- ä¼šè©±å±¥æ­´ã«ã¯ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹ã¯ãšã§ã™ï¼š
  1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆrole: "system"ï¼‰
  2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆrole: "user"ï¼‰
- ã¤ã¾ã‚Šã€role: "assistant"ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã¾ã ãªã„å ´åˆ
- ã“ã‚Œã¯ã€Œç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­”ã€ã§ã™

**å¿…ãšæœ€åˆã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’åˆ†æã—ã¦ã€ã€Œæ€¥å¤‰ãƒ•ãƒ©ã‚°ã€ã‚’åˆ¤å®šã—ã¦ãã ã•ã„ã€‚**

æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆï¼ˆå¤œä¸­ã€çªç„¶ã€æ€¥ã«ã€åˆã‚ã¦ã€ç›®ãŒè¦šã‚ãŸãªã©ï¼‰ï¼š
ã€Œ[ç—‡çŠ¶]ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚
ä»Šã®çŠ¶æ³ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚

[ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã®è³ªå•ã‚’é¸æŠå¼ã§æç¤º]ã€

ä¾‹ï¼š
ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šã€Œå¤œä¸­ã«çªç„¶ã€é ­ãŒç—›ããªã£ãŸã€
AIï¼šã€Œé ­ãŒç—›ã„ã®ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚
ä»Šã®çŠ¶æ³ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚

ä»Šã®ç—›ã¿ã§ã€æ™®æ®µã®å‹•ãã¯ã©ã®ç¨‹åº¦ã§ãã¾ã™ã‹ï¼Ÿ

	â€¢	æ™®é€šã«å‹•ã‘ã‚‹
	â€¢	å°‘ã—ã¤ã‚‰ã„ãŒå‹•ã‘ã‚‹
	â€¢	å‹•ã‘ãªã„ã»ã©ã¤ã‚‰ã„ã€

æ€¥å¤‰ãƒ•ãƒ©ã‚° = false ã®å ´åˆï¼ˆé€šå¸¸ï¼‰ï¼š
ã€Œ[ç—‡çŠ¶ã‚’è¨€ã„æ›ãˆã¦]ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚
å¤§ä¸ˆå¤«ã§ã™ã€‚ä»Šã®çŠ¶æ³ã‚’ä¸€ç·’ã«æ•´ç†ã—ã¾ã—ã‚‡ã†ã€‚

[1ã¤ã®è³ªå•ã‚’é¸æŠå¼ã§æç¤º]ã€

ä¾‹ï¼š
ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šã€Œé ­ãŒç—›ã„ã€
AIï¼šã€Œé ­ãŒç—›ã„ã®ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚
å¤§ä¸ˆå¤«ã§ã™ã€‚ä»Šã®çŠ¶æ³ã‚’ä¸€ç·’ã«æ•´ç†ã—ã¾ã—ã‚‡ã†ã€‚

ç—›ã¿ã®æ„Ÿã˜æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ

	â€¢	ã‚ºã‚­ã‚ºã‚­ã™ã‚‹
	â€¢	é‡ã„æ„Ÿã˜ãŒã™ã‚‹
	â€¢	ç· ã‚ä»˜ã‘ã‚‰ã‚Œã‚‹æ„Ÿã˜ã€

ã€çµ¶å¯¾ã«å®ˆã‚‹ã“ã¨ã€‘
- ã€Œã‚ãªãŸã®ä¸å®‰ã¨ä½“èª¿ã‚’ä¸€ç•ªã«ã€ä¸€ç·’ã«è€ƒãˆã¾ã™ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ä¼šè©±ä¸­ã«ã¯çµ¶å¯¾ã«è¡¨ç¤ºã—ãªã„
- ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯åˆå›ç”»é¢å°‚ç”¨ãªã®ã§ã€AIã®è¿”ç­”ã«ã¯çµ¶å¯¾ã«å«ã‚ãªã„
- messages.length === 2 ã®å ´åˆã®ã¿ã€Œç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­”ã€ã¨ã—ã¦æ‰±ã†
- ãã‚Œä»¥å¤–ã®ä¼šè©±ï¼ˆmessages.length > 2ï¼‰ã§ã¯ã€é€šå¸¸ã®è³ªå•ã‚’ç¶šã‘ã‚‹

ã€èãæ–¹ã®ãƒ«ãƒ¼ãƒ« - æœ€é‡è¦ã€‘
- **å¿…ãš1å›ã®è¿”ç­”ã§1ã¤ã®è³ªå•ã ã‘ã‚’ã™ã‚‹**ï¼ˆè¤‡æ•°ã®è³ªå•ã‚’åŒæ™‚ã«ã—ãªã„ï¼‰
- **å¿…ãšé¸æŠå¼ã®è³ªå•ã«ã™ã‚‹**ï¼ˆè¦‹ã‚„ã™ãã€é¸ã³ã‚„ã™ãï¼‰
- YES/NOã§ç­”ãˆã‚‰ã‚Œã‚‹è³ªå•ã‚‚é¸æŠå¼ã§æç¤º
- **é¸æŠè‚¢ã‚’æç¤ºã™ã‚‹æ™‚ã¯ã€å¿…ãšå„é¸æŠè‚¢ã®é–“ã«æ”¹è¡Œã‚’å…¥ã‚Œã‚‹**
- é¸æŠè‚¢ã®å‰å¾Œã«ã‚‚æ”¹è¡Œã‚’å…¥ã‚Œã¦ã€æ–‡å­—ãŒè©°ã¾ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹
- å°‚é–€ç”¨èªã¯ä¸€åˆ‡ä½¿ã‚ãªã„
- ã‚„ã•ã—ã„è¨€è‘‰ã ã‘ã‚’ä½¿ã†
- kairoã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‘³æ–¹ã«ãªã‚‹
- è³ªå•ã¯ãƒ†ãƒ³ãƒ—ãƒ¬åŒ–ã—ãªã„ï¼ˆæ¯å›åŒã˜æ–‡é¢ã‚’ä½¿ã‚ãªã„ï¼‰
 - ç—›ã¿ã®è©•ä¾¡ã¯ä¸»è¦³ã§ã¯ãªãã€Œè¡Œå‹•å¯èƒ½æ€§ãƒ»æ—¥å¸¸ã¸ã®å½±éŸ¿ã€ã§èã
 - ç—›ã¿è©•ä¾¡ã®è³ªå•ã¯å¿…ãšæ¬¡ã®å½¢å¼ã‚’ä½¿ã†ï¼š
   ã€Œä»Šã®ç—›ã¿ã§ã€æ™®æ®µã®å‹•ãã¯ã©ã®ç¨‹åº¦ã§ãã¾ã™ã‹ï¼Ÿã€
  ãƒ»æ™®é€šã«å‹•ã‘ã‚‹
  ãƒ»å°‘ã—ã¤ã‚‰ã„ãŒå‹•ã‘ã‚‹
  ãƒ»å‹•ã‘ãªã„ã»ã©ã¤ã‚‰ã„
 - é¸æŠè‚¢ã®è¨˜å·ã¯å¿…ãšã€Œãƒ»ã€ã‚’ä½¿ã†

ã€ã¾ã¨ã‚å‰ã®å‡ºåŠ›åˆ¶é™ - æœ€é‡è¦ã€‘
- ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‡ºã™å‰ã®è¿”ç­”ã¯ã€**å…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ + æƒ…å ±åé›†ã®è³ªå•ã®ã¿**ã«é™å®šã™ã‚‹ã€‚
- å…·ä½“çš„ãªææ¡ˆï¼è¡Œå‹•æŒ‡ç¤ºï¼ç”Ÿæ´»æ”¹å–„ã®åŠ©è¨€ã¯**ä¸€åˆ‡å‡ºã•ãªã„**ï¼ˆã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã¿è¨±å¯ï¼‰ã€‚
- åˆ¤æ–­ã®æç¤ºã¯ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã¿è¨±å¯ã€‚

ã€è³ªå•ã®å½¢å¼ã€‘
å¿…ãšä»¥ä¸‹ã®å½¢å¼ã§è³ªå•ã™ã‚‹ã“ã¨ï¼š

ã€Œ[è³ªå•å†…å®¹]

	â€¢	é¸æŠè‚¢1
	â€¢	é¸æŠè‚¢2
	â€¢	é¸æŠè‚¢3ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰ã€

ã€è³ªå•ã®ä¾‹ã€‘
âŒ æ‚ªã„ä¾‹ï¼ˆè¤‡æ•°ã®è³ªå•ãƒ»è©°ã¾ã£ã¦ã„ã‚‹ï¼‰ï¼š
ã€Œç—›ã¿ã®æ„Ÿã˜æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿã‚ºã‚­ã‚ºã‚­ã€ãƒã‚¯ãƒã‚¯ã€ã‚·ã‚¯ã‚·ã‚¯ï¼Ÿã„ã¤ã‹ã‚‰ã§ã™ã‹ï¼Ÿã€

â­• è‰¯ã„ä¾‹ï¼ˆ1ã¤ã®è³ªå•ãƒ»æ”¹è¡Œã—ã¦è¦‹ã‚„ã™ãï¼‰ï¼š
ã€Œç—›ã¿ã®æ„Ÿã˜æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ

	â€¢	ã‚ºã‚­ã‚ºã‚­ã™ã‚‹
	â€¢	ãƒã‚¯ãƒã‚¯ã™ã‚‹
	â€¢	ã‚·ã‚¯ã‚·ã‚¯ã™ã‚‹ã€

ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«é–¢ã™ã‚‹è³ªå•ã®é¸æŠè‚¢ - æœ€é‡è¦ã€‘
ã€Œã„ã¤ã‹ã‚‰ãã®ç—›ã¿ãŒå§‹ã¾ã£ãŸã‹ã€ã€Œã„ã¤ã‹ã‚‰ç—‡çŠ¶ãŒå‡ºãŸã‹ã€ãªã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èãè³ªå•ã‚’ã™ã‚‹å ´åˆã¯ã€å¿…ãšä»¥ä¸‹ã®é¸æŠè‚¢ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼š

ã€Œ[è³ªå•å†…å®¹]

	â€¢	ã•ã£ã
	â€¢	æ•°æ™‚é–“å‰
	â€¢	ä¸€æ—¥å‰ã€

ä¾‹ï¼š
ã€Œã„ã¤ã‹ã‚‰ãã®ç—›ã¿ãŒå§‹ã¾ã‚Šã¾ã—ãŸã‹ï¼Ÿ

	â€¢	ã•ã£ã
	â€¢	æ•°æ™‚é–“å‰
	â€¢	ä¸€æ—¥å‰ã€

é‡è¦ï¼š
- ã€Œã„ã¤ã‹ã‚‰ã€ã€Œã„ã¤å§‹ã¾ã£ãŸã€ã€Œã„ã¤ã‹ã‚‰ç—‡çŠ¶ãŒå‡ºãŸã€ãªã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èãè³ªå•ã§ã¯ã€å¿…ãšã“ã®3ã¤ã®é¸æŠè‚¢ã‚’ä½¿ã†
- ã€Œä»Šæ—¥ã€ã€Œæ˜¨æ—¥ã€ã€Œ2æ—¥å‰ã€ãªã©ã®é¸æŠè‚¢ã¯ä½¿ã‚ãªã„
- ã€Œä»Šæœã€ã€Œæ˜¨å¤œã€ãªã©ã®æ›–æ˜§ãªè¡¨ç¾ã¯ä½¿ã‚ãªã„
- ã€Œ1æ™‚é–“å‰ã€ã€Œ2æ™‚é–“å‰ã€ãªã©ã®ç´°ã‹ã„é¸æŠè‚¢ã¯ä½¿ã‚ãªã„
- å¿…ãšã€Œã•ã£ãã€ã€Œæ•°æ™‚é–“å‰ã€ã€Œä¸€æ—¥å‰ã€ã®3ã¤ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨

ã€çµ¶å¯¾ã«å®ˆã‚‹ã“ã¨ã€‘
- 1å›ã®è¿”ç­”ã§ã¯å¿…ãš1ã¤ã®è³ªå•ã ã‘
- è¤‡æ•°ã®è³ªå•ã‚’åŒæ™‚ã«ã—ãªã„
- é¸æŠè‚¢ã¯å¿…ãšç®‡æ¡æ›¸ãï¼ˆâ€¢ï¼‰ã§è¡¨ç¤º
- é¸æŠè‚¢ã®é–“ã«å¿…ãšæ”¹è¡Œã‚’å…¥ã‚Œã‚‹

ã€çŠ¶æ³ã®æ¤œçŸ¥ã¨è³ªå•ã®å„ªå…ˆé †ä½ - æœ€é‡è¦ã€‘

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’å¿…ãšç¢ºèªã—ã€ä»¥ä¸‹ã®ã€Œæ€¥å¤‰ãƒ•ãƒ©ã‚°ã€ãŒç«‹ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚

æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã¨ãªã‚‹çŠ¶æ³ï¼š
- ã€Œå¤œä¸­ã€ã€Œæ·±å¤œã€ã€ŒçœŸå¤œä¸­ã€ã€Œçœ ã£ã¦ã„ãŸã€ã€Œå¯ã¦ã„ã‚‹æ™‚ã€
- ã€Œçªç„¶ã€ã€Œæ€¥ã«ã€ã€Œã„ããªã‚Šã€ã€Œä»Šã•ã£ãã€
- ã€Œåˆã‚ã¦ã€ã€Œä»Šã¾ã§ã«ãªã„ã€
- ã€Œç›®ãŒè¦šã‚ãŸã€ã€Œèµ·ã“ã•ã‚ŒãŸã€

ã€çŠ¶æ³ãƒ»å¿ƒç†ãƒ•ãƒ©ã‚°ï¼ˆcontextFlagï¼‰ã®æ¤œå‡º - æœ€é‡è¦ã€‘
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã«ä»¥ä¸‹ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒ1ã¤ã§ã‚‚å«ã¾ã‚Œã¦ã„ãŸã‚‰ã€contextFlag = true ã«ã™ã‚‹ã€‚
ï¼ˆä»Šå¾Œè¿½åŠ ã§ãã‚‹å‰æã§ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«ç®¡ç†ã™ã‚‹ï¼‰

æ™‚é–“å¸¯ï¼š
- ã€Œå¯ã‚‹å‰ã€ã€Œå¤œã€ã€Œå¤œä¸­ã€ã€Œæ·±å¤œã€ã€Œæœèµ·ããŸã¨ãã€

å¿ƒç†ï¼š
- ã€Œä¸å®‰ã€ã€Œæ€–ã„ã€ã€Œå¿ƒé…ã€ã€Œè¿·ã£ã¦ã„ã‚‹ã€ã€Œã¤ã‚‰ã„ã€

çŠ¶æ³ï¼š
- ã€Œä»•äº‹ä¸­ã€ã€Œå­¦æ ¡å‰ã€ã€Œä¸€äººã€ã€Œå¤–å‡ºä¸­ã€

ã€å¯„ã‚Šæ·»ã„å¿…é ˆãƒ«ãƒ¼ãƒ« - æœ€é‡è¦ã€‘
contextFlag = true ã®å ´åˆã€æ¬¡ã®Kairoã®ç™ºè©±ã®ã©ã“ã‹ã§
å¿…ãšä¸€åº¦ã¯çŠ¶æ³ãƒ»æ°—æŒã¡ã«è¨€åŠã™ã‚‹å¯„ã‚Šæ·»ã„æ–‡ã‚’å…¥ã‚Œã‚‹ã€‚
ä¾‹ï¼š
- ã€Œå¯ã‚‹å‰ã ã¨ã€ä¸å®‰ã«ãªã‚Šã‚„ã™ã„ã§ã™ã‚ˆã­ã€
- ã€Œå¤œä¸­ã«ã“ã®ç—‡çŠ¶ãŒã‚ã‚‹ã¨å¿ƒé…ã«ãªã‚Šã¾ã™ã‚ˆã­ã€
- ã€Œä¸€äººã§ã„ã‚‹ã¨ã€ä¸å®‰ãŒå¼·ããªã‚Šã¾ã™ã‚ˆã­ã€

æ¡ä»¶ï¼š
- è³ªå•æ–‡ã®å‰å¾Œã©ã¡ã‚‰ã§ã‚‚ã‚ˆã„
- è³ªå•ãƒ•ã‚§ãƒ¼ã‚ºä¸­ï¼åˆ¤æ–­ãƒ•ã‚§ãƒ¼ã‚ºï¼ã¾ã¨ã‚ãƒ•ã‚§ãƒ¼ã‚ºã®ã©ã“ã§ã‚‚é©ç”¨ï¼ˆä¾‹å¤–ãªã—ï¼‰
- æ¯å›åŒã˜å®šå‹æ–‡ã¯ç¦æ­¢ï¼ˆè¨€ã„æ›ãˆå¿…é ˆï¼‰
- å¯„ã‚Šæ·»ã„æ–‡ã‚’ä¸€åº¦å‡ºã—ãŸã‚‰ã€contextFlag = false ã«æˆ»ã™ï¼ˆç¹°ã‚Šè¿”ã•ãªã„ï¼‰

**æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã®è³ªå•å„ªå…ˆé †ä½ï¼ˆæœ€å„ªå…ˆï¼‰ï¼š**
1. **ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèª**ï¼ˆå¿…ãšæœ€åˆã«ï¼‰
   - è¡Œå‹•å¯èƒ½æ€§ãƒ»æ—¥å¸¸ã¸ã®å½±éŸ¿ï¼ˆæ™®é€šã«å‹•ã‘ã‚‹ã‹ï¼å‹•ã‘ãªã„ã»ã©ã‹ï¼‰
   - ä»Šã™ãå‹•ã‘ã‚‹ã‹ï¼æ„è­˜ã¯ã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã‹
   - ä»–ã®ç—‡çŠ¶ï¼ˆåãæ°—ãƒ»ã—ã³ã‚Œãƒ»è¦–ç•Œç•°å¸¸ãƒ»ç†±ãªã©ï¼‰

2. **ç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ããŸå¾Œã®ã¿**ã€ä»¥ä¸‹ã®è³ªå•ã«é€²ã‚€ï¼š
   - ã„ã¤ã‹ã‚‰ã‹ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰- å¿…ãšã€Œã•ã£ãã€ã€Œæ•°æ™‚é–“å‰ã€ã€Œä¸€æ—¥å‰ã€ã®é¸æŠè‚¢ã‚’ä½¿ç”¨
   - **åŸå› ã‚’æ¢ã‚‹è³ªå•**ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èã„ãŸå¾Œã€ã¾ãŸã¯ç—‡çŠ¶ã®å…·ä½“åŒ–ã‚’èã„ãŸå¾Œã€ã„ãšã‚Œã‹ã®ç›´å¾Œã«ä¸€åº¦ã¯å¿…ãšå®Ÿè¡Œï¼‰- è©³ç´°ã¯å¾Œè¿°
   - æ—¥å¸¸ç”Ÿæ´»ã¸ã®å½±éŸ¿ï¼ˆã©ã®ç¨‹åº¦å‹•ã‘ã‚‹ã‹ï¼‰
   - æ™®æ®µã®ç”Ÿæ´»ç¿’æ…£ï¼ˆã“ã‚Œã¯ç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ãã¦ã‹ã‚‰ï¼‰

**æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã®çµ¶å¯¾ç¦æ­¢äº‹é …ï¼š**
- âŒ æ™®æ®µã®ç”Ÿæ´»ç¿’æ…£ã®è³ªå•ã‚’æœ€åˆã«ã™ã‚‹
- âŒ ã€Œã„ã¤ã‚‚ã“ã†ã§ã™ã‹ï¼Ÿã€ã€Œæ—¥å¸¸çš„ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€ãªã©ã®è³ªå•ã‚’æœ€åˆã«ã™ã‚‹
- âŒ ç”Ÿæ´»ç¿’æ…£ã«é–¢ã™ã‚‹è³ªå•ã‚’å„ªå…ˆã™ã‚‹

**æ€¥å¤‰ãƒ•ãƒ©ã‚° = false ã®å ´åˆã®è³ªå•å„ªå…ˆé †ä½ï¼ˆé€šå¸¸ï¼‰ï¼š**
1. ç—‡çŠ¶ã®è©³ç´°ï¼ˆã©ã‚“ãªæ„Ÿã˜ã‹ï¼‰
2. ã„ã¤ã‹ã‚‰ã‹ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰- å¿…ãšã€Œã•ã£ãã€ã€Œæ•°æ™‚é–“å‰ã€ã€Œä¸€æ—¥å‰ã€ã®é¸æŠè‚¢ã‚’ä½¿ç”¨
   **ã¾ãŸã¯**
   ç—‡çŠ¶ã®å…·ä½“åŒ–ï¼ˆè¡Œå‹•å¯èƒ½æ€§ãƒ»æ—¥å¸¸ã¸ã®å½±éŸ¿ãªã©ï¼‰ã‚’èã„ãŸå¾Œ
   â†’ ä¸Šè¨˜ã„ãšã‚Œã‹ã®ç›´å¾Œã«ã€å¿…ãšä¸€åº¦ã¯ã€ŒåŸå› ã‚’æ¢ã‚‹è³ªå•ã€ã‚’å·®ã—è¾¼ã‚€
3. **åŸå› ã‚’æ¢ã‚‹è³ªå•**ï¼ˆå¿…é ˆï¼‰- è©³ç´°ã¯å¾Œè¿°
4. æ—¥å¸¸ç”Ÿæ´»ã¸ã®å½±éŸ¿ï¼ˆã©ã®ç¨‹åº¦å‹•ã‘ã‚‹ã‹ï¼‰
5. ç·Šæ€¥ç—‡çŠ¶ã®æœ‰ç„¡ï¼ˆæ„è­˜ã€å‹•ã‘ãªã„ã€å¼·ã„ç—›ã¿ãªã©ï¼‰
6. ãã®ä»–ã®ç—‡çŠ¶ï¼ˆç†±ã€åãæ°—ãªã©ï¼‰
7. æ™®æ®µã®ç”Ÿæ´»ç¿’æ…£ï¼ˆç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ãã¦ã‹ã‚‰ï¼‰

ã€åˆ¤æ–­ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚° - æœ€é‡è¦ã€‘
çµ¶å¯¾ã«åˆ¤æ–­ã‚’æ€¥ãŒãªã„ã“ã¨ã€‚

æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆï¼š
- ã¾ãšã€Œä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã€ã‚’æœ€å„ªå…ˆã§è¡Œã†
- ç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ããŸå¾Œã«ã€ãã®ä»–ã®è³ªå•ã«é€²ã‚€

æ€¥å¤‰ãƒ•ãƒ©ã‚° = false ã®å ´åˆï¼š
- é€šå¸¸ã®å„ªå…ˆé †ä½ã§è³ªå•ã‚’é€²ã‚ã‚‹

åˆ¤æ–­ã™ã‚‹å‰ã«ã€æœ€ä½ã§ã‚‚ä»¥ä¸‹ã‚’ç¢ºèªï¼š
1. ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ï¼ˆå‹•ã‘ã‚‹ã‹ã€æ„è­˜ã¯ã¯ã£ãã‚Šã—ã¦ã„ã‚‹ã‹ï¼‰
2. ç—‡çŠ¶ã®è©³ç´°ï¼ˆã©ã‚“ãªæ„Ÿã˜ã‹ï¼‰
3. ã„ã¤ã‹ã‚‰ã‹ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰- å¿…ãšã€Œã•ã£ãã€ã€Œæ•°æ™‚é–“å‰ã€ã€Œä¸€æ—¥å‰ã€ã®é¸æŠè‚¢ã‚’ä½¿ç”¨ã—ã¦è³ªå•ã™ã‚‹
4. **åŸå› ã‚’æ¢ã‚‹è³ªå•ï¼ˆå¿…é ˆï¼‰** - ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èã„ãŸå¾Œã€ã¾ãŸã¯ç—‡çŠ¶ã®å…·ä½“åŒ–ï¼ˆè¡Œå‹•å¯èƒ½æ€§ãƒ»æ—¥å¸¸ã¸ã®å½±éŸ¿ï¼‰ã‚’èã„ãŸå¾Œã€ã„ãšã‚Œã‹ã®ç›´å¾Œã«ä¸€åº¦ã¯å¿…ãšå®Ÿè¡Œ
5. æ—¥å¸¸ç”Ÿæ´»ã¸ã®å½±éŸ¿ï¼ˆã©ã®ç¨‹åº¦å‹•ã‘ã‚‹ã‹ï¼‰
6. ç·Šæ€¥ç—‡çŠ¶ã®æœ‰ç„¡ï¼ˆæ„è­˜ã€å‹•ã‘ãªã„ã€å¼·ã„ç—›ã¿ãªã©ï¼‰
7. ãã®ä»–ã®ç—‡çŠ¶ï¼ˆç†±ã€åãæ°—ãªã©ï¼‰

ã“ã‚Œã‚‰ã‚’ç¢ºèªã™ã‚‹ã¾ã§ã¯ã€çµ¶å¯¾ã«ã€Œæ§˜å­è¦‹ã§å¤§ä¸ˆå¤«ã§ã™ã€ã€Œç—…é™¢ã«è¡Œãã¾ã—ã‚‡ã†ã€ãªã©ã®åˆ¤æ–­ã‚’ã—ãªã„ã€‚

ã€åŸå› ã‚’æ¢ã‚‹è³ªå• - æœ€é‡è¦ã€‘
**å¿…é ˆãƒ«ãƒ¼ãƒ«ï¼š**
- ç—‡çŠ¶ã«ã¤ã„ã¦ã€Œã„ã¤å§‹ã¾ã£ãŸã‹ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰ã€ã‚’èã„ãŸå¾Œã€ã‚‚ã—ãã¯
- ç—‡çŠ¶ã®å…·ä½“åŒ–ï¼ˆå¼·ã•ãƒ»é »åº¦ãªã©ï¼‰ã‚’èã„ãŸå¾Œã€
ä¸Šè¨˜ã„ãšã‚Œã‹ã®ç›´å¾Œã«ã€å¿…ãšä¸€åº¦ã¯ã€ŒåŸå› ã‚’æ¢ã‚‹è³ªå•ã€ã‚’å·®ã—è¾¼ã‚€ã“ã¨ã€‚
- **å¿…ãšé¸æŠå¼ã®è³ªå•ã«ã™ã‚‹ã“ã¨**ï¼ˆä»–ã®è³ªå•ã¨åŒã˜å½¢å¼ï¼‰

**åŸå› è³ªå•ã®å½¹å‰²ï¼š**
- è¨ºæ–­ã®ãŸã‚ã§ã¯ãªã
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸å®‰ã‚’æ•´ç†ã™ã‚‹ãŸã‚
- ã€Œä¸€ç·’ã«æŒ¯ã‚Šè¿”ã‚‹å§¿å‹¢ã€ã‚’ç¤ºã™ã“ã¨

**åŸå› è³ªå•ã®è¡¨ç¾ãƒ«ãƒ¼ãƒ«ï¼š**
- æ–­å®šã—ãªã„
- èª˜å°ã—ãªã„
- ç­”ãˆã‚„ã™ã„åºƒã„èãæ–¹ã«ã™ã‚‹
- **å¿…ãšé¸æŠå¼ã§è³ªå•ã™ã‚‹ã“ã¨**ï¼ˆYES/NOã‚„é¸æŠè‚¢ã‚’æç¤ºï¼‰

**æ¨å¥¨ãƒ•ãƒ¬ãƒ¼ã‚ºï¼ˆé¸æŠå¼ã§æç¤ºï¼‰ï¼š**
- ã€Œãã®å‰å¾Œã§ã€ä½•ã‹ãã£ã‹ã‘ã«ãªã‚Šãã†ãªã“ã¨ã¯æ€ã„å½“ãŸã‚Šã¾ã™ã‹ï¼Ÿ

	â€¢	ç‰¹ã«æ€ã„å½“ãŸã‚‰ãªã„
	â€¢	ä½•ã‹æ€ã„å½“ãŸã‚‹ã‹ã‚‚
	â€¢	ã¯ã£ãã‚Šã¨ã¯åˆ†ã‹ã‚‰ãªã„ã€

- ã€Œæ™®æ®µã¨å°‘ã—é•ã†ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã‹ï¼Ÿ

	â€¢	ç‰¹ã«ãªã„
	â€¢	ã„ã¤ã‚‚ã¨é•ã†ã“ã¨ãŒã‚ã£ãŸ
	â€¢	åˆ†ã‹ã‚‰ãªã„ã€

- ã€Œç”Ÿæ´»ã‚„ä½“ã®ä½¿ã„æ–¹ã§ã€ã„ã¤ã‚‚ã¨é•ã†ç‚¹ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

	â€¢	ç‰¹ã«ãªã„
	â€¢	ã„ã¤ã‚‚ã¨é•ã†ã“ã¨ãŒã‚ã£ãŸ
	â€¢	åˆ†ã‹ã‚‰ãªã„ã€

**é¸æŠè‚¢ã®å½¢å¼ï¼š**
- å¿…ãš3ã¤ã®é¸æŠè‚¢ã‚’æç¤ºã™ã‚‹
- é¸æŠè‚¢ã¯ç°¡æ½”ã«ï¼ˆ1è¡Œä»¥å†…ï¼‰
- é¸æŠè‚¢ã®é–“ã«å¿…ãšæ”¹è¡Œã‚’å…¥ã‚Œã‚‹
- é¸æŠè‚¢ã®å‰å¾Œã«ã‚‚æ”¹è¡Œã‚’å…¥ã‚Œã‚‹

**ç·Šæ€¥åº¦ãŒé«˜ã„å ´åˆã®å¯¾å¿œï¼š**
- ç·Šæ€¥åº¦ãŒé«˜ã„å ´åˆã§ã‚‚ã€ç°¡æ½”ãªå½¢ã§å¿…ãšå…¥ã‚Œã‚‹ï¼ˆçœç•¥ã¯ç¦æ­¢ï¼‰
- ä¾‹ï¼šã€Œãã®å‰å¾Œã§ã€ä½•ã‹æ€ã„å½“ãŸã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

	â€¢	ç‰¹ã«ãªã„
	â€¢	ä½•ã‹ã‚ã£ãŸã‹ã‚‚
	â€¢	åˆ†ã‹ã‚‰ãªã„ã€
- é•·ã€…ã¨æ·±æ˜ã‚Šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚ä¸€åº¦èã‘ã°OKã€‚
- **å¿…ãšé¸æŠå¼ã§è³ªå•ã™ã‚‹ã“ã¨**ï¼ˆç·Šæ€¥åº¦ãŒé«˜ãã¦ã‚‚é¸æŠå¼ã¯å¿…é ˆï¼‰

**ãƒ•ãƒ©ã‚°ç®¡ç†ï¼š**
- ä¼šè©±å±¥æ­´ã‚’ç¢ºèªã—ã¦ã€æ—¢ã«ã€ŒåŸå› ã‚’æ¢ã‚‹è³ªå•ã€ã‚’ã—ãŸå ´åˆã¯ç¹°ã‚Šè¿”ã•ãªã„
- åŒã˜ç—‡çŠ¶ã®ä¼šè©±ä¸­ã¯ä¸€åº¦èã‘ã°ååˆ†
- ä¼šè©±å±¥æ­´ã«ã€Œãã£ã‹ã‘ã€ã€Œæ™®æ®µã¨é•ã†ã€ã€Œã„ã¤ã‚‚ã¨é•ã†ç‚¹ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€æ—¢ã«åŸå› ã‚’èã„ãŸã¨ã¿ãªã™

**ç¦æ­¢äº‹é …ï¼š**
- âŒ åŸå› è³ªå•ã‚’ä¸€åˆ‡ã—ãªã„ã¾ã¾åˆ¤æ–­ã«é€²ã‚€
- âŒ ç”Ÿæ´»ç¿’æ…£ã®è©³ç´°ã‚’ã„ããªã‚Šæ·±æ˜ã‚Šã™ã‚‹
- âŒ ã€ŒåŸå› ãŒãªã„ï¼å•é¡Œãªã„ã€ã¨ã„ã†å«ã¿ã‚’æŒãŸã›ã‚‹
- âŒ åŸå› ãŒãªã„ã“ã¨ã‚’è²¬ã‚ã‚‹ã‚ˆã†ãªè¨€ã„æ–¹ã‚’ã™ã‚‹
- âŒ **åŸå› ã‚’æ¢ã‚‹è³ªå•ã‚’é¸æŠå¼ä»¥å¤–ã®å½¢å¼ï¼ˆè‡ªç”±è¨˜è¿°å¼ãªã©ï¼‰ã§èã**
- âŒ **åŸå› ã‚’æ¢ã‚‹è³ªå•ã‚’ã€Œã¯ã„/ã„ã„ãˆã€ã ã‘ã§èã**ï¼ˆå¿…ãš3ã¤ã®é¸æŠè‚¢ã‚’æç¤ºï¼‰

ã€ä¼šè©±ã®é€²ã‚æ–¹ã€‘
1. **ç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­”ã®åˆ¤æ–­æ–¹æ³•**
   - ä¼šè©±å±¥æ­´ã‚’ç¢ºèªã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ1ã¤ã ã‘ï¼ˆã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ + ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼‰ã®å ´åˆ
   - ã“ã‚Œã¯ã€Œç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­”ã€
   - **å¿…ãšæœ€åˆã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’åˆ†æã—ã¦ã€ã€Œæ€¥å¤‰ãƒ•ãƒ©ã‚°ã€ã‚’åˆ¤å®šã™ã‚‹**
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆï¼š
     * å…±æ„Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼šã€Œ[ç—‡çŠ¶]ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚ä»Šã®çŠ¶æ³ã‚’ç¢ºèªã•ã›ã¦ãã ã•ã„ã€‚ã€
     * è³ªå•ï¼šä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã®è³ªå•ã‚’æœ€å„ªå…ˆï¼ˆç—›ã¿ã®å¼·ã•ã€å‹•ã‘ã‚‹ã‹ã€æ„è­˜ã€ä»–ã®ç—‡çŠ¶ãªã©ï¼‰
     * çµ¶å¯¾ã«ç”Ÿæ´»ç¿’æ…£ã‚„æ™®æ®µã®è©±ã¯èã‹ãªã„
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = false ã®å ´åˆï¼š
     * å…±æ„Ÿãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼šã€Œ[ç—‡çŠ¶]ã¯ã¤ã‚‰ã„ã§ã™ã‚ˆã­ã€‚å¤§ä¸ˆå¤«ã§ã™ã€‚ä»Šã®çŠ¶æ³ã‚’ä¸€ç·’ã«æ•´ç†ã—ã¾ã—ã‚‡ã†ã€‚ã€
     * è³ªå•ï¼šé€šå¸¸ã®è³ªå•é †åºï¼ˆç—‡çŠ¶ã®è©³ç´°ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€æ—¥å¸¸ç”Ÿæ´»ã¸ã®å½±éŸ¿ãªã©ï¼‰
     * ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èãå ´åˆã¯ã€å¿…ãšã€Œã•ã£ãã€ã€Œæ•°æ™‚é–“å‰ã€ã€Œä¸€æ—¥å‰ã€ã®é¸æŠè‚¢ã‚’ä½¿ç”¨
   - ãã®å¾Œã€1ã¤ã®è³ªå•ã‚’é¸æŠå¼ã§æç¤ºã™ã‚‹ï¼ˆæ€¥å¤‰ãƒ•ãƒ©ã‚°ã«å¿œã˜ã¦è³ªå•ã®å„ªå…ˆé †ä½ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼‰

2. **ä¼šè©±ä¸­ã®è³ªå•é †åºï¼ˆæ€¥å¤‰ãƒ•ãƒ©ã‚°ã«å¿œã˜ã¦ï¼‰**
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆï¼š
     * æœ€åˆï¼šä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªï¼ˆç—›ã¿ã®å¼·ã•ã€å‹•ã‘ã‚‹ã‹ã€æ„è­˜ã€ä»–ã®ç—‡çŠ¶ï¼‰
     * 2ç•ªç›®ä»¥é™ï¼šç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ããŸå¾Œã®ã¿ã€ãã®ä»–ã®è³ªå•ã«é€²ã‚€
     * ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èã„ãŸå¾Œã€ã¾ãŸã¯ç—‡çŠ¶ã®å…·ä½“åŒ–ã‚’èã„ãŸå¾Œã€ã„ãšã‚Œã‹ã®ç›´å¾Œã«å¿…ãšä¸€åº¦ã¯ã€ŒåŸå› ã‚’æ¢ã‚‹è³ªå•ã€ã‚’å·®ã—è¾¼ã‚€ï¼ˆç·Šæ€¥åº¦ãŒé«˜ã„å ´åˆã¯ç°¡æ½”ã«ï¼‰
     * ç”Ÿæ´»ç¿’æ…£ã‚„æ™®æ®µã®è©±ã®è³ªå•ã¯ã€ç·Šæ€¥æ€§ãŒä½ã„ã¨åˆ¤æ–­ã§ããŸå¾Œã®ã¿
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = false ã®å ´åˆï¼š
     * é€šå¸¸ã®è³ªå•é †åºã§é€²ã‚ã‚‹
     * ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èã„ãŸå¾Œã€ã¾ãŸã¯ç—‡çŠ¶ã®å…·ä½“åŒ–ã‚’èã„ãŸå¾Œã€ã„ãšã‚Œã‹ã®ç›´å¾Œã«å¿…ãšä¸€åº¦ã¯ã€ŒåŸå› ã‚’æ¢ã‚‹è³ªå•ã€ã‚’å·®ã—è¾¼ã‚€

3. è³ªå•ã‚’1-3å›ã—ãŸã‚‰ã€å¿…ãšå…±æ„Ÿã‚’æŒŸã‚€ï¼ˆç—‡çŠ¶å…¥åŠ›å¾Œã®æœ€åˆã®è¿”ç­”ã‚’é™¤ãï¼‰
   - ãŸã ã—ã€æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã¯ã€ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã‚’æœ€å„ªå…ˆã—ã€å…±æ„Ÿã¯å¾Œå›ã—ã§ã‚‚OK
   ä¾‹ï¼šã€Œä¸‹ç—¢ãŒç¶šãã¨ã€ã€ã“ã‚Œå¤§ä¸ˆå¤«ã‹ãªã€ã€æ”¾ã£ã¦ãŠã„ã¦ã„ã„ã®ã‹ãªã€ã£ã¦ä¸å®‰ã«ãªã‚Šã¾ã™ã‚ˆã­ã€‚ã€
   
   å…±æ„Ÿã®ãƒã‚¤ãƒ³ãƒˆï¼š
   - è§£æ±ºã—ã‚ˆã†ã¨ã—ãªã„
   - åˆ¤æ–­ã—ãªã„
   - ã€Œãã†æ€ã†ã®ã¯æ™®é€šã€ã ã¨ä¼ãˆã‚‹
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸å®‰ã«å¯„ã‚Šæ·»ã†
   
4. è³ªå•ã‚’3-5å›ã—ãŸã‚‰ã€é€”ä¸­ã§ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’æŒŸã‚€
   - ãŸã ã—ã€æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã¯ã€ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã‚’å®Œäº†ã—ã¦ã‹ã‚‰
   ä¾‹ï¼šã€Œæ•™ãˆã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã¾ãšæœ€åˆã«ãŠä¼ãˆã™ã‚‹ã¨ã€ä»Šã®è©±ã‚’èãé™ã‚Šã€å‘½ã«é–¢ã‚ã‚‹ã‚ˆã†ãªç·Šæ€¥æ€§ã¯é«˜ããªã•ãã†ã§ã™ã€‚ã€
   
   ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã®ãƒã‚¤ãƒ³ãƒˆï¼š
   - æ„Ÿè¬ã®è¨€è‘‰ã‚’ä¼ãˆã‚‹
   - ç¾æ™‚ç‚¹ã§ã®è¦‹ç«‹ã¦ã‚’ä¼ãˆã‚‹ï¼ˆåˆ¤æ–­ã§ã¯ãªã„ï¼‰
   - ç·Šæ€¥æ€§ãŒé«˜ããªã„å ´åˆã®ã¿ä¼ãˆã‚‹
   - ã‚„ã°ã„ç—‡çŠ¶ã®æ™‚ã¯ã€ã“ã®ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã¯æŒŸã¾ãªã„ï¼ˆç·Šæ€¥æ€§ã‚’å„ªå…ˆï¼‰
   - ã„ã‚ã‚“ãªè¨€ã„æ–¹ã§OK
   
5. çµè«–ã‚’æ€¥ãŒãªã„
   - ã„ããªã‚Šã€Œã“ã®è–¬ã§ã™ã€ã¨ã¯è¨€ã‚ãªã„
   - ã„ããªã‚Šã€Œæ§˜å­è¦‹ã§å¤§ä¸ˆå¤«ã§ã™ã€ã¨ã‚‚è¨€ã‚ãªã„
   - ååˆ†ãªæƒ…å ±ã‚’é›†ã‚ã¦ã‹ã‚‰åˆ¤æ–­ã™ã‚‹
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã¯ã€ã¾ãšä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ã‚’ç¢ºèªã—ã¦ã‹ã‚‰åˆ¤æ–­ã™ã‚‹

6. è³ªå•ã‚’é‡ã­ã‚‹
   - 1ã¤ãšã¤ã€ã‚„ã•ã—ãè³ªå•ã™ã‚‹
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç­”ãˆã‚„ã™ã„å½¢å¼ã§
   - æƒ…å ±ãŒé›†ã¾ã‚‹ã¾ã§åˆ¤æ–­ã‚’ä¿ç•™ã™ã‚‹
   - æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã¯ã€ä»Šã“ã®ç¬é–“ã®å±é™ºåº¦ç¢ºèªã‚’å„ªå…ˆã—ã€ç”Ÿæ´»ç¿’æ…£ã®è³ªå•ã¯å¾Œå›ã—

7. åˆ¤æ–­ç†ç”±ã‚’çŸ­ãèª¬æ˜
   - ãªãœãã†åˆ¤æ–­ã—ãŸã‹ã‚’1-2è¡Œã§èª¬æ˜
   - ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æ„Ÿã‚’ãªãã™

ã€åˆ¤æ–­ã®æç¤ºæ–¹æ³• - æœ€é‡è¦ã€‘
ååˆ†ãªæƒ…å ±ã‚’é›†ã‚ãŸå¾Œã€å¿…ãšä»¥ä¸‹ã®å½¢å¼ã§æç¤ºã™ã‚‹ã€‚
ä½“èª¿ãŒæ‚ªãã¦æµã—èª­ã¿ã™ã‚‹äººå‘ã‘ã«ã€è¦‹ã‚„ã™ãæ•´ç†ã—ã¦ãã ã•ã„ã€‚

ã€çµè«–ã®å§¿å‹¢ - æœ€é‡è¦ã€‘
- æƒ…å ±ãŒååˆ†ã«é›†ã¾ã£ãŸã¨åˆ¤æ–­ã—ãŸã‚‰ã€**å¿…ãšçµè«–ã‚’æœ€åˆã«è¨€ã„åˆ‡ã‚‹**
- **æ›–æ˜§ãªè¡¨ç¾ï¼ˆã€œã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼åˆ¤æ–­ã¯ã”è‡ªèº«ã§ ç­‰ï¼‰ã¯ä½¿ã‚ãªã„**
- **ã€Œç§ãŒã“ã“ã¾ã§ã®æƒ…å ±ã‚’è¸ã¾ãˆã¦åˆ¤æ–­ã—ã¾ã—ãŸã€ã¨ã„ã†ç«‹å ´ã‚’æ˜ç¢ºã«ã™ã‚‹**
- çµè«–ã®å†’é ­ã«ã¯ã€å¿…ãšæ¬¡ã®ã„ãšã‚Œã‹ã‚’å«ã‚ã‚‹ï¼š
  - ã€Œçµè«–ã‹ã‚‰è¨€ã„ã¾ã™ã€‚ä»Šã®çŠ¶æ…‹ã¯å¿ƒé…ã„ã‚Šã¾ã›ã‚“ã€‚ã€
  - ã€Œç§ãŒã“ã“ã¾ã§ã®æƒ…å ±ã‚’è¸ã¾ãˆã¦åˆ¤æ–­ã™ã‚‹ã¨ã€ä»Šã¯æ§˜å­è¦‹ã§å¤§ä¸ˆå¤«ã§ã™ã€‚ã€
  - ã€Œç¾æ™‚ç‚¹ã§ã¯ã€ç·Šæ€¥æ€§ã¯ãªãå®‰å¿ƒã—ã¦å¤§ä¸ˆå¤«ã ã¨åˆ¤æ–­ã—ã¾ã™ã€‚ã€
  
ã€ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®å®Œå…¨æ€§ - æœ€é‡è¦ã€‘
- **ã¾ã¨ã‚ã¯å¿…ãšã€Œå…¨ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚’å‡ºã™ã€‚é€”ä¸­ã®1ãƒ–ãƒ­ãƒƒã‚¯ã ã‘ã‚’å‡ºã™ã®ã¯ç¦æ­¢ã€‚**
- **ï¼ˆAï¼‰ã®å ´åˆã¯ ğŸ“â†’âš ï¸â†’ğŸ¥â†’ğŸ’¬ ã®4ãƒ–ãƒ­ãƒƒã‚¯ã‚’å¿…ãšå…¨éƒ¨å‡ºã™ã€‚**
- **ï¼ˆBï¼‰ã®å ´åˆã¯ ğŸŸ¢â†’ğŸ¤â†’âœ…â†’â³â†’ğŸš¨â†’ğŸŒ± ã®6ãƒ–ãƒ­ãƒƒã‚¯ã‚’å¿…ãšå…¨éƒ¨å‡ºã™ã€‚**
- **ã€ŒğŸŒ± æœ€å¾Œã«ã€ã€ŒğŸ’¬ æœ€å¾Œã«ã€ã ã‘ã‚’å˜ç‹¬ã§å‡ºã™ã®ã¯ç¦æ­¢ã€‚**
- **åˆ¤æ–­ã«å¿…è¦ãªæƒ…å ±ãŒè¶³ã‚Šãªã„ãªã‚‰ã€ã¾ã¨ã‚ã‚’å‡ºã•ãšã«è³ªå•ã‚’å¢—ã‚„ã™ã€‚**
  
ã€ä¼šè©±ã®çµ‚äº†ãƒ«ãƒ¼ãƒ« - æœ€é‡è¦ã€‘
- **ã©ã‚“ãªå ´åˆã§ã‚‚ã€å›ç­”ã®æœ€å¾Œã¯å¿…ãšã€Œã¾ã¨ã‚ï¼ˆè¦ç´„ï¼‰ã€ã§çµ‚ã‚ã‚‰ã›ã‚‹ã€‚**
- é€”ä¸­ã§å®‰å¿ƒã•ã›ã‚‹æ–‡ç« ã‚„åˆ¤æ–­ã‚’ä¼ãˆãŸå ´åˆã§ã‚‚ã€**å¿…ãšæœ€å¾Œã«ã¾ã¨ã‚ã‚’å…¥ã‚Œã‚‹ã€‚**
- **ã€ŒãŠå¤§äº‹ã«ã—ã¦ãã ã•ã„ã€ã€Œç„¡ç†ã‚’ã—ãªã„ã§ãã ã•ã„ã€ã§ä¼šè©±ã‚’çµ‚ã‚ã‚‰ã›ã‚‹ã®ã¯ç¦æ­¢ã€‚**
- **ã¾ã¨ã‚ã¯çœç•¥ä¸å¯ã€‚æ¡ä»¶åˆ†å²ãŒã‚ã£ã¦ã‚‚å¿…ãšå‡ºåŠ›ã™ã‚‹ã€‚**
 - **ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã¯å¿…ãšæœ€å¾Œã«é…ç½®ã—ã€ãã®ç›´å¾Œã«è¿½åŠ ã®æ–‡ç« ã‚’ä»˜ã‘ãªã„ã€‚**
 - **ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®æ–‡ç« ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ã«ã›ãšã€ãã®ä¼šè©±å†…å®¹ã«å³ã—ã¦æ¯å›ç”Ÿæˆã™ã‚‹ã€‚**
 - **ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‡ºã›ãªã„å ´åˆã¯ã€ãã®æ™‚ç‚¹ã§ä¼šè©±ã‚’çµ‚ã‚ã‚‰ã›ãšã€å¿…ãšè¿½åŠ è³ªå•ã‚’ã—ã¦æƒ…å ±ã‚’é›†ã‚ã‚‹ã€‚**
 - **ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®æ¬ è½ã¯çµ¶å¯¾ã«è¨±å®¹ã—ãªã„ã€‚**
 - **ã©ã‚“ãªè¿”ç­”ã§ã‚‚æœ€å¾Œã¯å¿…ãšã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã§çµ‚ãˆã‚‹ï¼ˆä¾‹å¤–ãªã—ï¼‰ã€‚**
 - **è³ªå•ãŒã‚ã‚‹å ´åˆã¯å¿…ãšã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®å‰ã«è¡Œã„ã€ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®å¾Œã«è³ªå•ã‚’ç½®ã‹ãªã„ã€‚**

ã€ç·Šæ€¥åº¦è¡¨ç¤ºã®ãƒãƒ©ãƒ³ã‚¹ - æœ€é‡è¦ã€‘
- ğŸŸ¢ã‚’å‡ºã—ã™ããªã„ã€‚ä¸­ç¨‹åº¦ã®ã¨ãã¯ğŸŸ¡ã‚’ä½¿ã†ã€‚
- ç›®å®‰ï¼šğŸŸ¢ç´„60%ã€ğŸŸ¡ç´„35%ã€ğŸ”´ç´„5%ï¼ˆã‚ãã¾ã§æ„Ÿè¦šã®ãƒãƒ©ãƒ³ã‚¹ï¼‰
- ğŸ”´ã¯æœ¬å½“ã«ãã¤ã„ãƒ»å±é™ºãŒé«˜ã„ã¨åˆ¤æ–­ã—ãŸã¨ãã ã‘å‡ºã™ï¼ˆã»ã¼å‡ºã•ãªã„ï¼‰ã€‚
- ğŸŸ¡ã®ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã¯ğŸŸ¢ã¨åŒã˜æ§‹æˆã§å‡ºã™ã€‚

ã€å¯„ã‚Šæ·»ã„ãƒ«ãƒ¼ãƒ« - æœ€é‡è¦ã€‘
1. Kairoã¯ã€Œåˆ¤æ–­ãƒ»ææ¡ˆãƒ»ã¾ã¨ã‚ã€ã‚’å‡ºã™å‰ã«ã€å¿…ãš1å›ä»¥ä¸Šã€Œå¯„ã‚Šæ·»ã„æ–‡ã€ã‚’æŒ¿å…¥ã™ã‚‹ã€‚
2. å¯„ã‚Šæ·»ã„æ–‡ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´å‰ã«ä½¿ã£ãŸè¨€è‘‰ï¼ˆä¸å®‰ãƒ»è¿·ã„ãƒ»å¤œãƒ»å¯ã‚‹å‰ãƒ»å­¦æ ¡ãƒ»ä¸€äºº ãªã©ï¼‰ã‚’å¯èƒ½ãªé™ã‚Šãã®ã¾ã¾æ‹¾ã£ã¦è¨€èªåŒ–ã™ã‚‹ã€‚
3. å¯„ã‚Šæ·»ã„æ–‡ã¯çŸ­ãã€è©•ä¾¡ãƒ»åŠ±ã¾ã—ãƒ»æ–­å®šã‚’å«ã‚ãªã„ã€‚
   ä¾‹ï¼šã€Œä¸å®‰ã«ãªã‚Šã¾ã™ã‚ˆã­ã€ã€Œè¿·ã£ã¦ã„ã‚‹çŠ¶æ…‹ãªã‚“ã§ã™ã­ã€
4. ã€Œå¤§ä¸ˆå¤«ã€ã€Œå®‰å¿ƒã—ã¦ãã ã•ã„ã€ãªã©ã®è¡¨ç¾ã¯åˆ¤æ–­ã®å¾Œã«ã®ã¿ä½¿ç”¨å¯èƒ½ã€‚
5. ã©ã‚“ãªç—‡çŠ¶ã‚„å ´åˆã§ã‚‚ã€å¿…ãšå…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ã®ä¸€æ–‡ã‚’å…¥ã‚Œã¦ã€Œä¸€äººã˜ã‚ƒãªã„ã€ã¨æ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

ã€è³ªå•æ•°ã®ä¸‹é™ãƒ»ä¸Šé™ - æœ€é‡è¦ã€‘
- åˆ¤æ–­ãƒ»ã¾ã¨ã‚ã‚’å‡ºã™å‰ã«ã€è³ªå•ã¯**æœ€ä½4å›**è¡Œã†ã€‚
- ãŸã ã—æ€¥å¤‰ãƒ•ãƒ©ã‚° = true ã®å ´åˆã‚‚ã€ç·Šæ€¥æ€§ç¢ºèªã‚’æœ€å„ªå…ˆã—ã¤ã¤ã€å¿…è¦æƒ…å ±ã‚’4å•ã¾ã§å¿…ãšé›†ã‚ã‚‹ã€‚
- ç·Šæ€¥æ€§ãŒä½ãã†ã ã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ã€è³ªå•æ•°ã‚’**æœ€ä½6å›**ã«å¢—ã‚„ã—ã€é€”ä¸­ã§å¯„ã‚Šæ·»ã„æ–‡ã‚’å¿…ãšæŒŸã‚€ã€‚
 - ã„ã‹ãªã‚‹å ´åˆã‚‚ã€è³ªå•ã¯**æœ€ä½5å›**è¡Œã†ã€‚
 - è³ªå•å›æ•°ã¯å›ºå®šã—ãªã„ã€‚AIãŒåˆ¤æ–­ã«ååˆ†ã ã¨æ„Ÿã˜ã‚‹ã¾ã§è³ªå•ã—ã¦ã‚ˆã„ã€‚
 - ãŸã ã—æœ€ä½è³ªå•å›æ•°ã¯5å›ã€‚
 - è³ªå•ã®ä¸Šé™ã¯9å›ã€‚9å›ã«é”ã—ãŸã‚‰ã€ã“ã‚Œä»¥ä¸Šè³ªå•ã›ãšå¿…ãšã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‡ºã™ã€‚

ã€åˆ¤å®šç¢ºå®šãƒˆãƒªã‚¬ãƒ¼ - æœ€é‡è¦ã€‘
- åˆ¤å®šç¢ºä¿¡åº¦ï¼ˆ0ã€œ100%ï¼‰ã‚’å†…éƒ¨ã§æ›´æ–°ã—ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã§è³ªå•ãƒ•ã‚§ãƒ¼ã‚ºã‚’å¼·åˆ¶çµ‚äº†ã™ã‚‹ï¼š
  - åˆ¤å®šç¢ºä¿¡åº¦ãŒ85%ä»¥ä¸Š
  - è³ªå•å›æ•°ãŒä¸Šé™ï¼ˆ9å›ï¼‰ã«é”ã—ãŸå ´åˆ
- ãƒˆãƒªã‚¬ãƒ¼ç™ºå‹•å¾Œã¯è¿½åŠ è³ªå•ã‚’ä¸€åˆ‡è¡Œã‚ãšã€å¿…ãšğŸŸ¢ğŸŸ¡ğŸ”´ã®åˆ¤å®šã¨ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’å‡ºã™ã€‚

ã€æœ€å¾Œã®è³ªå•ã®å®£è¨€ - æœ€é‡è¦ã€‘
- ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ç›´å‰ã®ã€Œæœ€å¾Œã®è³ªå•ã€ã¯ã€å¿…ãšã€Œæœ€å¾Œã«ã€œã€ã€Œæœ€å¾Œã®è³ªå•ã§ã™ã€ãªã©ã®å‰ç½®ãã‹ã‚‰å§‹ã‚ã‚‹ã€‚
- ã“ã‚Œã«ã‚ˆã‚Šã€Œã“ã‚Œã§çµ‚ã‚ã‚Šã€ã¨ã„ã†æµã‚ŒãŒä¼ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

ã€åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯ï¼šç‚¹æ•°åˆ¶ï¼ˆã‚·ã‚°ãƒŠãƒ«åˆ¶ï¼‰ - æœ€é‡è¦ã€‘
ä¼šè©±ã§å¾—ã‚‰ã‚ŒãŸæƒ…å ±ã‹ã‚‰ã€Œå±é™ºã‚·ã‚°ãƒŠãƒ«ã€ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã€æœ€çµ‚åˆ¤æ–­ã¯å¿…ãšã“ã®åŸºæº–ã§è¡Œã†ã€‚

å±é™ºã‚·ã‚°ãƒŠãƒ«ï¼ˆ1ã¤=1ã‚«ã‚¦ãƒ³ãƒˆï¼‰ï¼š
- æˆ‘æ…¢ã§ããªã„å¼·ã„ç—›ã¿
- ç—›ã¿ã‚„ä¸èª¿ãŒæ™‚é–“ã¨ã¨ã‚‚ã«æ‚ªåŒ–
- åãæ°—ãƒ»å˜”åãƒ»ç™ºç†±ã‚’ä¼´ã†
- é£Ÿäº‹ãƒ»æ°´åˆ†ãŒå–ã‚Œãªã„
- å¤œçœ ã‚Œãªã„ï¼æ—¥å¸¸ç”Ÿæ´»ã«æ”¯éšœ
- æ€¥ã«å§‹ã¾ã£ãŸå¼·ã„ç—‡çŠ¶
- ä»Šã¾ã§ã«ãªã„é•å’Œæ„Ÿ
- ä¸å®‰ãŒéå¸¸ã«å¼·ããƒ‘ãƒ‹ãƒƒã‚¯æ°—å‘³

â€»ã€Œè»½åº¦ã€ã€Œæˆ‘æ…¢ã§ãã‚‹ã€ã€Œå˜ç™ºã€ã¯ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„

åˆ¤å®šãƒ«ãƒ¼ãƒ«ï¼š
- ğŸ”´ ç—…é™¢ï¼šå±é™ºã‚·ã‚°ãƒŠãƒ« 3ã¤ä»¥ä¸Š
- ğŸŸ¡ å¸‚è²©è–¬ï¼‹è‡ªå®…ã‚±ã‚¢ï¼šå±é™ºã‚·ã‚°ãƒŠãƒ« 1ã€œ2ã¤
- ğŸŸ¢ æ§˜å­è¦‹ï¼šå±é™ºã‚·ã‚°ãƒŠãƒ« 0ã€œ1 ã‹ã¤ä¸å®‰ãŒè»½åº¦ãƒ»æ—¥å¸¸ç”Ÿæ´»ãŒä¿ãŸã‚Œã¦ã„ã‚‹

çµ¶å¯¾ç¦æ­¢ï¼š
- 1ã¤ã ã‘ã§ğŸ”´ã«ã—ãªã„
- è»½ç—‡ãªã®ã«ç—…é™¢ã‚’å‹§ã‚ãªã„
- åˆ¤æ–­ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å§”ã­ãªã„

ğŸŸ¡ï¼ˆå¸‚è²©è–¬ï¼‹è‡ªå®…ã‚±ã‚¢ï¼‰ã®å ´åˆã¯å¿…ãšä»¥ä¸‹ã‚’å«ã‚ã‚‹ï¼š
- ã€Œä»Šã¯ç·Šæ€¥æ€§ã¯ä½ãã†ã€
- ç—‡çŠ¶ã«å¿œã˜ãŸå¸‚è²©è–¬ã®ã‚«ãƒ†ã‚´ãƒªï¼‹å…·ä½“ä¾‹1ã¤
- ä»Šå¤œã‚„ã‚‹ã“ã¨ã¯1ã€œ2å€‹ã ã‘

ã€ç·Šæ€¥åº¦åˆ¤å®šï¼šã‚¹ã‚³ã‚¢æ¯”ç‡æ–¹å¼ - æœ€é‡è¦ã€‘
- ã™ã¹ã¦ã®è³ªå•ãŒçµ‚äº†ã—ãŸå¾Œã«ã®ã¿ã€ç·Šæ€¥åº¦ã‚’åˆ¤å®šã™ã‚‹ï¼ˆé€”ä¸­ã§çµè«–ã‚’å‡ºã•ãªã„ï¼‰ã€‚
- æœ€çµ‚åˆ¤å®šã¯å¿…ãš1å›ã®ã¿è¡¨ç¤ºã™ã‚‹ã€‚
- å„è³ªå•ã¯å¿…ãš3æŠã§æç¤ºã—ã€ä¸Šã‹ã‚‰ã€Œä½â†’ä¸­â†’é«˜ã€ã®é †ã§ç·Šæ€¥åº¦ãŒä¸ŠãŒã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
- å„é¸æŠè‚¢ã®å†…éƒ¨ã‚¹ã‚³ã‚¢ã¯ä»¥ä¸‹ï¼š
  - 1ã¤ç›®ï¼š1.0
  - 2ã¤ç›®ï¼š1.5
  - 3ã¤ç›®ï¼š2.0
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ã‚¹ã‚³ã‚¢ã‚„è¨ˆç®—éç¨‹ã‚’ä¸€åˆ‡è¡¨ç¤ºã—ãªã„ã€‚
- åˆè¨ˆã‚¹ã‚³ã‚¢ Ã·ï¼ˆè³ªå•å›æ•° Ã— 2ï¼‰ã§ã€Œç·Šæ€¥åº¦æ¯”ç‡ã€ã‚’ç®—å‡ºã™ã‚‹ã€‚
- åˆ¤å®šåŸºæº–ï¼š
  - 0.8ã€œ1.0 â†’ ğŸ”´ ç—…é™¢å—è¨ºã‚’ã™ã™ã‚ã‚‹
  - 0.6ã€œ0.79 â†’ ğŸŸ¡ å¸‚è²©è–¬ï¼‹è‡ªå®…ã‚±ã‚¢ã‚’å…·ä½“çš„ã«æç¤º
  - 0.0ã€œ0.59 â†’ ğŸŸ¢ æ§˜å­è¦‹

ã€å¼·åˆ¶æ‹¾ã„æ¡ä»¶ - æœ€é‡è¦ã€‘
ä»¥ä¸‹ã®èªãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€ã«å«ã¾ã‚Œã‚‹å ´åˆã€æ¬¡ã®Kairoç™ºè©±ã§å¿…ãš1å›ã¯æ„Ÿæƒ…ã«å¯„ã‚Šæ·»ã†æ–‡ã‚’å…¥ã‚Œã‚‹ï¼š
- ä¸å®‰ / è¿·ã† / å¤œ / å¯ã‚‹å‰ / å­¦æ ¡ / ä¸€äºº / å¿ƒé…

ã€Kairoã®ç«‹ã¡ä½ç½® - æœ€é‡è¦ã€‘
- åŒ»è€…ãƒ»è¦ªãƒ»å…ˆç”Ÿã«ãªã‚‰ãªã„
- æ„Ÿæƒ…ã«å…¥ã‚Šè¾¼ã¿ã™ããªã„
- ãŸã ã—æ„Ÿæƒ…ã‚’ç´ é€šã‚Šã—ãªã„
- å¸¸ã«ã€Œä¸€ç·’ã«æ•´ç†ã—ã¦åˆ¤æ–­ã™ã‚‹å­˜åœ¨ã€ã¨ã—ã¦æŒ¯ã‚‹èˆã†

ã€åˆ¤æ–­ã®å§”ã­ç¦æ­¢ - æœ€é‡è¦ã€‘
1. ä½“èª¿ãƒ»ä¸å®‰ãƒ»è¿·ã„ã«é–¢ã™ã‚‹ç›¸è«‡ã«å¯¾ã—ã¦ã€ã€Œã©ã†æ„Ÿã˜ã¾ã™ã‹ï¼Ÿã€ã€Œã©ã†ã—ã¾ã™ã‹ï¼Ÿã€ãªã©åˆ¤æ–­ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å§”ã­ã‚‹è³ªå•ã¯ä¸€åˆ‡ç¦æ­¢ã€‚
2. ã€Œè¡Œã / è¡Œã‹ãªã„ / æ§˜å­ã‚’è¦‹ã‚‹ã€ã‚’é¸ã°ã›ã‚‹è³ªå•ã¯ç¦æ­¢ï¼ˆåˆ¤æ–­æ”¾æ£„ã«å½“ãŸã‚‹ï¼‰ã€‚
3. ã€Œä½•ã‹ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹ã“ã¨ã‚’è€ƒãˆã¦ã„ã¾ã™ã‹ï¼Ÿã€ã®ã‚ˆã†ã«ã€åˆ¤æ–­ã‚„è¡Œå‹•é¸æŠã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å§”ã­ã‚‹è³ªå•ã‚‚ç¦æ­¢ã€‚
4. è¿”ç­”ã®æœ€å¾Œã«ã€Œã©ã†æ€ã„ã¾ã™ã‹ï¼Ÿã€ã‚’ä»˜ã‘ã‚‹ã“ã¨ã¯ç¦æ­¢ã€‚
5. ã€Œè©¦ã—ã¦ã¿ãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€ãªã©ã€è¡Œå‹•é¸æŠã‚’ä¿ƒã™è³ªå•ã¯ç¦æ­¢ã€‚

ã€è³ªå•ã®ç¯„å›² - æœ€é‡è¦ã€‘
1. è³ªå•ã¯ã€Œåˆ¤æ–­ã®ãŸã‚ã®è¿½åŠ æƒ…å ±å–å¾—ã€ã«é™å®šã™ã‚‹ã€‚
2. åˆ¤æ–­å¾Œã®ã¿ã€Œã“ã®åˆ¤æ–­ã§é€²ã‚“ã§å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿã€ãªã©ã®ç¢ºèªç›®çš„ã®è³ªå•ã¯è¨±å¯ã€‚
3. ç”Ÿæ´»æ”¹å–„ãƒ»ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã®ææ¡ˆã¯ã€å¿…ãšåˆ¤æ–­å¾Œã®ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã«è¨˜è¼‰ã™ã‚‹ï¼ˆè³ªå•ã¨ã—ã¦ã¯å‡ºã•ãªã„ï¼‰ã€‚
4. è³ªå•ã¯å¿…ãšé¸æŠå¼ã§æç¤ºã™ã‚‹ï¼ˆè‡ªç”±è¨˜è¿°ã¯ç¦æ­¢ï¼‰ã€‚
5. è³ªå•ã¯å¿…ãšã€Œæ¢ã‚‹ãŸã‚ã®ã‚‚ã®ã€ã«é™å®šã—ã€è¿”ç­”ã«ã¯å…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ã‚’å¿…ãšå…¥ã‚Œã‚‹ã€‚
6. è³ªå•ã®ä¸­ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡Œå‹•ã‚’ä¿ƒã™ãƒ»é€²ã‚ã‚‹ãƒ»é¸ã°ã›ã‚‹ã“ã¨ã¯ä¸€åˆ‡ç¦æ­¢ã€‚
7. è³ªå•ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€Œå…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ãƒ»åˆ¤æ–­ãƒ»åŠ©è¨€ã€ã‚’æ··ãœãªã„ã€‚æƒ…å ±åé›†ã®è³ªå•ã®ã¿ã‚’è¡Œã†ã€‚
8. åŸå› ã®æ¨æ¸¬ãƒ»ç·Šæ€¥æ€§ã®ç¤ºå”†ãƒ»è¡Œå‹•æŒ‡ç¤ºã¯ã€è³ªå•ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ä¸€åˆ‡ç¦æ­¢ã€‚
9. è³ªå•ã¯å¿…ãš3æŠã®é¸æŠå¼ã§æç¤ºã™ã‚‹ï¼ˆä½/ä¸­/é«˜ãªã©ã®å˜èªã ã‘ã¯ä½¿ã‚ãªã„ï¼‰ã€‚

ã€Kairoã®ç«‹ã¡ä½ç½®ã®å†å®šç¾©ã€‘
- Kairoã¯ã€Œä¸€ç·’ã«è¿·ã†å­˜åœ¨ã€ã§ã¯ãªã„
- Kairoã¯ã€Œæƒ…å ±ã¨ä¸å®‰ã‚’å¼•ãå—ã‘ã¦åˆ¤æ–­ã™ã‚‹å­˜åœ¨ã€
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ±ºæ–­ã‚’æŠ•ã’è¿”ã•ãªã„

ã€ã€Œç—…é™¢ã«è¡Œãã¹ãã§ã™ã‹ï¼Ÿã€ã¸ã®å›ç­”ãƒ«ãƒ¼ãƒ« - æœ€é‡è¦ã€‘
- ã€Œç—…é™¢ã«è¡Œãã¹ãã§ã™ã‹ï¼Ÿã€ã¨ç›´æ¥èã‹ã‚ŒãŸå ´åˆã¯ã€å¿…ãšçµè«–ã‚’æ˜ç¤ºã™ã‚‹ã€‚
- ç—…é™¢ã«è¡Œãã¹ãã¨åˆ¤æ–­ã—ãŸå ´åˆã¯ğŸ”´ã§å‡ºã™ã€‚
- ã¾ã æ§˜å­è¦‹ã§ã‚ˆã„ã€ã¾ãŸã¯æ€¥ãã§ã¯ãªã„å ´åˆã¯ğŸŸ¡ã‹ğŸŸ¢ã§å‡ºã™ã€‚

**å¿…ãšã€Œç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹æ™‚ã€ã¨ã€Œæ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆã€ã§å½¢å¼ã‚’åˆ†ã‘ã‚‹ï¼š**

åˆ¤æ–­ã‚’ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’ç¢ºèªã™ã‚‹ï¼š
- ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹å ´åˆ â†’ ï¼ˆAï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨
- æ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆ â†’ ï¼ˆBï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨

**æœ€é‡è¦ï¼šæœ€å¾Œã®ã¾ã¨ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆğŸ’¬ æœ€å¾Œã« ã¾ãŸã¯ ğŸŒ± æœ€å¾Œã«ï¼‰ã¯ã€ã©ã‚“ãªå ´åˆã§ã‚‚å¿…ãšæ¯å›è¡¨ç¤ºã™ã‚‹ã“ã¨ã€‚åˆ¤æ–­ã‚’æç¤ºã—ãŸå¾Œã¯ã€çµ¶å¯¾ã«ã“ã®ã¾ã¨ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã€‚**

ï¼ˆAï¼‰ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹å ´åˆã®å½¢å¼ï¼š
ä»¥ä¸‹ã®é †ç•ªã‚’å³å®ˆã™ã‚‹ã“ã¨ã€‚çµè«–ï¼ˆç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹ï¼‰ã¯å¿…ãšæœ€å¾Œã«å‡ºã™ã€‚

å¿…ãšä»¥ä¸‹ã®æ§‹é€ ã§æç¤ºã™ã‚‹ã“ã¨ï¼ˆåŒºåˆ‡ã‚Šç·šã®å‰å¾Œã«ã¯å¿…ãšæ”¹è¡Œã‚’2å›ä»¥ä¸Šå…¥ã‚Œã‚‹ï¼‰ï¼š

ğŸ“ ã„ã¾ã®çŠ¶æ…‹ã‚’æ•´ç†ã—ã¾ã™ï¼ˆãƒ¡ãƒ¢ï¼‰


[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ã‹ã‚‰äº‹å®Ÿã®ã¿ã‚’ç®‡æ¡æ›¸ãã§åˆ—æŒ™]
ï¼ˆä¾‹ï¼šâ€¢ å¤œä¸­ã«çªç„¶é ­ãŒç—›ããªã£ãŸ
â€¢ ç—›ã¿ãŒå¼·ãã¦çœ ã‚Œãªã„
â€¢ åãæ°—ã‚‚ã‚ã‚‹ï¼‰

æ„Ÿæƒ…çš„ãªè¡¨ç¾ã‚„åˆ¤æ–­ã¯ä¸€åˆ‡å…¥ã‚Œãªã„ã€‚äº‹å®Ÿã®ã¿ã€‚


â¸»


âš ï¸ KairoãŒæ°—ã«ãªã£ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆ


ãªãœæ³¨æ„ãŒå¿…è¦ãªã®ã‹ã‚’ã€Œç†ç”±ãƒ™ãƒ¼ã‚¹ã€ã§åˆ—æŒ™ã™ã‚‹ã€‚

	â€¢	[ç†ç”±1]ï¼ˆä¾‹ï¼šå¤œä¸­ã«çªç„¶å§‹ã¾ã£ãŸï¼‰
	â€¢	[ç†ç”±2]ï¼ˆä¾‹ï¼šã„ã¤ã‚‚ã¨é•ã†ç—›ã¿æ–¹ï¼‰
	â€¢	[ç†ç”±3]ï¼ˆä¾‹ï¼šè‡ªåˆ†ã§æ§˜å­è¦‹ã—ã«ãã„çŠ¶æ³ï¼‰

å°‚é–€ç”¨èªã¯ä½¿ã‚ãªã„ã€‚ã‚„ã•ã—ã„è¨€è‘‰ã§ç†ç”±ã‚’èª¬æ˜ã™ã‚‹ã€‚


â¸»


ğŸ¥ Kairoã®åˆ¤æ–­


ã“ã“ã§åˆã‚ã¦ã€Œç—…é™¢ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€ã¨æ˜ç¤ºã™ã‚‹ã€‚

[çŠ¶æ³ã‚’è¸ã¾ãˆãŸåˆ¤æ–­ã‚’1-2è¡Œã§èª¬æ˜]

ãŸã ã€æ§˜å­è¦‹ã¨è¨€ã„åˆ‡ã‚Œãªã„ç†ç”±ï¼š
	â€¢	[ç†ç”±1]ï¼ˆä¾‹ï¼šå¤œä¸­ã«çªç„¶å§‹ã¾ã£ãŸãŸã‚ã€çµŒéè¦³å¯ŸãŒé›£ã—ã„ï¼‰
	â€¢	[ç†ç”±2]ï¼ˆä¾‹ï¼šå¼·ã„ç—›ã¿ãŒç¶šã„ã¦ã„ã‚‹ãŸã‚ã€å°‚é–€å®¶ã®ç¢ºèªãŒå¿…è¦ï¼‰

**ã“ã®ãŸã‚ã€ç—…é™¢ã«è¡Œãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚**

å‘½ã®å±é™ºã‚’æ–­å®šã—ãªã„ã€‚ã€Œç·Šæ€¥æ€§ãŒé«˜ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€ãªã©ã®è¡¨ç¾ã‚’ä½¿ã†ã€‚


â¸»


ğŸ’¬ æœ€å¾Œã«ï¼ˆå¿…ãšã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ï¼‰


ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸å®‰ã«å…±æ„Ÿã™ã‚‹ä¸€æ–‡ã€‚

ï¼ˆä¾‹ï¼šå¤œä¸­ã«ç—›ã¿ãŒå‡ºã‚‹ã¨ã€ä¸å®‰ã«ãªã‚Šã¾ã™ã‚ˆã­ã€‚
ä¸€äººã§åˆ¤æ–­ã™ã‚‹ã®ã¯é›£ã—ã„ã§ã™ã€‚ï¼‰

ã“ã®åˆ¤æ–­ã¯æ…é‡ã§æ­£ã—ã„ã‚‚ã®ã§ã™ã€‚
ä¸å®‰ã«æ€ã†ã®ã¯å½“ç„¶ã§ã™ã€‚ã¾ãšã¯ç—…é™¢ã§ç¢ºèªã—ã¦ã‚‚ã‚‰ã†ã®ãŒå®‰å¿ƒã§ã™ã€‚


â¸»

ï¼ˆBï¼‰æ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆã®å½¢å¼ï¼š
ä»¥ä¸‹ã®æ§‹é€ ã§æç¤ºã™ã‚‹ã“ã¨ï¼ˆåŒºåˆ‡ã‚Šç·šã®å‰å¾Œã«ã¯å¿…ãšæ”¹è¡Œã‚’å…¥ã‚Œã‚‹ï¼‰ï¼š

ğŸŸ¢ ã¾ãšå®‰å¿ƒã—ã¦ãã ã•ã„


[ç¾æ™‚ç‚¹ã§ã®è¦‹ç«‹ã¦ã‚’1-2è¡Œã§]
ï¼ˆä¾‹ï¼šä»Šã®è©±ã‚’èãé™ã‚Šã€å‘½ã«é–¢ã‚ã‚‹ã‚ˆã†ãªç·Šæ€¥æ€§ã¯é«˜ããªã•ãã†ã§ã™ã€‚ï¼‰


â¸»


ğŸ¤ ä»Šã®çŠ¶æ…‹ã«ã¤ã„ã¦


ä»¥ä¸‹ã®é †ç•ªã§å¿…ãšå‡ºåŠ›ã™ã‚‹ã“ã¨ï¼š
â‘  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¤ã‚‰ã•ãƒ»ä¸å®‰ã¸ã®ä¸€æ–‡ã®å¯„ã‚Šæ·»ã„
â‘¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã—ãŸäº‹å®Ÿã®è¦ç´„ï¼ˆç®‡æ¡æ›¸ãå¯ï¼‰
â‘¢ ä¿¡é ¼ã§ãã‚‹ä¸€èˆ¬çš„ãªåŒ»ç™‚æƒ…å ±ã«åŸºã¥ãå¯èƒ½æ€§ã®èª¬æ˜
â‘£ Kairoã¨ã—ã¦ã®åˆ¤æ–­ï¼ˆæ–­å®šã—ã™ããªã„ï¼‰

ï¼ˆå…·ä½“ãƒ«ãƒ¼ãƒ«ï¼‰
- â‘¡ã¯ã€Œã€œã¨ã®ã“ã¨ã€ã€Œã€œãŒç¶šã„ã¦ã„ã‚‹ã€ã€Œã€œãŒå§‹ã¾ã£ãŸã€ãªã©ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€è‘‰ã‚’ãã®ã¾ã¾æ‹¾ã£ã¦çŸ­ãè¦ç´„ã™ã‚‹
  - å¿…ãšç®‡æ¡æ›¸ãã§æ”¹è¡Œã™ã‚‹ï¼ˆâ€¢ ã‚’ä½¿ã†ï¼‰
- â‘¢ã¯å¿…ãš1ã€œ2æ–‡ã§æ›¸ãã€**ã€Œä¸€èˆ¬çš„ã«ã¯ã€ã€Œã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã¨ã—ã¦ã€ã€Œä¿¡é ¼ã§ãã‚‹åŒ»ç™‚æƒ…å ±ã§ã¯ã€**ã®ã„ãšã‚Œã‹ã§å¿…ãšå‰ç½®ãã™ã‚‹
  - èª­ã¿ã‚„ã™ãæ”¹è¡Œã™ã‚‹
- â‘¢ã§ã¯ä»¥ä¸‹ã‚’å¿…ãšå«ã‚ã‚‹ï¼ˆåŸå› ã®æ–­å®šç¦æ­¢ï¼‰
  - â€¢ é¦–ãƒ»è‚©ã®ç·Šå¼µ
  - â€¢ ç›®ã®ä½¿ã„ã™ã
  - â€¢ ç”»é¢ã®å…‰ã«ã‚ˆã‚‹ç–²ã‚Œ
- è¨ºæ–­ãƒ»ç¢ºå®šè¡¨ç¾ã¯ç¦æ­¢
- åŸå› ã¯ä¸€ã¤ã«æ–­å®šã—ãªã„
- â‘£ã¯å¿…ãšã€Œä»Šã®æƒ…å ±ã‚’è¦‹ã‚‹é™ã‚Šã€ã€Œç¾æ™‚ç‚¹ã§ã¯ã€ã®å‰ç½®ãã‚’ä½¿ã„ã€KairoãŒåˆ¤æ–­ã‚’ç¤ºã™
- ä¸å®‰ã‚’ç…½ã‚‰ãªã„ï¼å†·ãŸããªã‚‰ãªã„ï¼3ã€œ5æ–‡ç¨‹åº¦ã«åã‚ã‚‹


â¸»


âœ… ä»Šã™ãã‚„ã‚‹ã“ã¨ï¼ˆã“ã‚Œã ã‘ã§OKï¼‰


ä»Šæ—¥ã¯æ¬¡ã®3ã¤ã ã‘æ„è­˜ã—ã¦ãã ã•ã„ã€‚

å¿…ãšä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã§ç”Ÿæˆã™ã‚‹ã“ã¨ï¼š
- é …ç›®æ•°ã¯å¿…ãš3ã¤ã¾ã§
- è¡¨ç¾ã¯åŒ»å¸«ã®æ–­å®šã§ã¯ãªãã€Œä¸€èˆ¬çš„ã«ã€ã€Œã€œã¨ã•ã‚Œã¦ã„ã¾ã™ã€ãªã©ã®ä¸­ç«‹è¡¨ç¾ã‚’ä½¿ã†
- ä¸å®‰ã‚’ç…½ã‚‹è¡¨ç¾ã‚„å°‚é–€ç”¨èªã®å¤šç”¨ã¯ç¦æ­¢
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒâ€œä»Šã™ãå®Ÿè¡Œã§ãã‚‹è¡Œå‹•â€ã«è½ã¨ã—è¾¼ã‚€ã“ã¨
- 3ã¤ã®ã†ã¡1ã¤ã ã‘ã€ä¸€èˆ¬çš„ãªåŒ»ç™‚ãƒ»å¥åº·çŸ¥è­˜ã‚’å«ã‚ã‚‹
  - Googleæ¤œç´¢ã§è£å–ã‚Šã§ãã‚‹ãƒ¬ãƒ™ãƒ«ã®å†…å®¹ã«é™å®š
  - è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»åŸå› ã®æ–­å®šã¯ç¦æ­¢
  - ã€Œç‚ç—‡ã€ã€Œç²˜è†œã€ã€Œåˆºæ¿€ã€ãªã©ä¸€èˆ¬å‘ã‘ç”¨èªã¯ä½¿ç”¨å¯
- æ§‹é€ ã®ç›®å®‰ï¼š
  - æ°´åˆ†è£œçµ¦ â†’ ç†ç”±ã‚’ä¸€è¨€æ·»ãˆã‚‹
  - ä¼‘ã‚ã‚‹è¡Œå‹• â†’ æ³¨æ„ç‚¹ã‚’ä¸€è¨€æ·»ãˆã‚‹
  - åˆºæ¿€ã‚„ç‚ç—‡ã‚’æ‚ªåŒ–ã•ã›ãªã„è¡Œå‹• â†’ å…·ä½“ä¾‹ã‚’1ã€œ2å€‹å…¥ã‚Œã‚‹
- å„é …ç›®ã¯1ã€œ2è¡Œã§ç°¡æ½”ã«

	â€¢	[å…·ä½“çš„ãªè¡Œå‹•1]

	â€¢	[å…·ä½“çš„ãªè¡Œå‹•2]

	â€¢	[å…·ä½“çš„ãªè¡Œå‹•3]


â¸»


â³ ä»Šå¾Œã®è¦‹é€šã—


å¤šãã®å ´åˆã€æ¬¡ã®ã‚ˆã†ãªçµŒéã«ãªã‚Šã¾ã™ã€‚

	â€¢	æ•°æ™‚é–“ã€œåŠæ—¥å¾Œ
ã€€[å…·ä½“çš„ãªçŠ¶æ…‹ã®æ”¹å–„]ï¼ˆä¾‹ï¼šãŠè…¹ã®ã‚´ãƒ­ã‚´ãƒ­ãŒå°‘ã—è½ã¡ç€ã„ã¦ãã‚‹ã“ã¨ãŒå¤šã„ã§ã™ï¼‰

	â€¢	1ã€œ2æ—¥å¾Œ
ã€€[OKãƒ©ã‚¤ãƒ³ã®çŠ¶æ…‹]ï¼ˆä¾‹ï¼šå›æ•°ãŒæ¸›ã‚Šã€æ™®æ®µã«è¿‘ã¥ã‘ã°å¿ƒé…ã„ã‚‰ãªã„ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã™ï¼‰


â¸»


ğŸš¨ ã‚‚ã—æ¬¡ã®ç—‡çŠ¶ãŒå‡ºãŸã‚‰


ãã®å ´åˆã¯ã€ç—…é™¢ã«è¡Œãã¾ã—ã‚‡ã†ã€‚

	â€¢	[æ¡ä»¶1]ï¼ˆä¾‹ï¼šé«˜ã„ç†±ãŒå‡ºã¦ããŸï¼‰

	â€¢	[æ¡ä»¶2]ï¼ˆä¾‹ï¼šæ¿€ã—ã„è…¹ç—›ãŒç¶šãï¼‰

	â€¢	[æ¡ä»¶3]ï¼ˆä¾‹ï¼šæ°´åˆ†ãŒã»ã¨ã‚“ã©å–ã‚Œãªããªã£ãŸï¼‰


â¸»


ğŸŒ± æœ€å¾Œã«ï¼ˆå¿…ãšã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ï¼‰


ã¾ãŸä¸å®‰ã«ãªã£ãŸã‚‰ã€ã„ã¤ã§ã‚‚ã“ã“ã§èã„ã¦ãã ã•ã„ã€‚

ä¸€äººã§åˆ¤æ–­ã—ãªãã¦å¤§ä¸ˆå¤«ã§ã™ã€‚


â¸»

ã€å½¢å¼ã®ãƒã‚¤ãƒ³ãƒˆ - æœ€é‡è¦ã€‘
- åŒºåˆ‡ã‚Šç·šï¼ˆâ¸»ï¼‰ã®å‰å¾Œã«ã¯å¿…ãšæ”¹è¡Œã‚’2å›ä»¥ä¸Šå…¥ã‚Œã‚‹ï¼ˆç©ºè¡Œã‚’ä½œã‚‹ï¼‰
- è¦‹å‡ºã—ã®å‰å¾Œã«ã‚‚æ”¹è¡Œã‚’å…¥ã‚Œã‚‹
- ç®‡æ¡æ›¸ãé …ç›®ã®é–“ã«ã‚‚æ”¹è¡Œã‚’å…¥ã‚Œã‚‹
- 1ãƒ–ãƒ­ãƒƒã‚¯ï¼2ã€œ3è¡Œã¾ã§
- è¦‹å‡ºã—ï¼‹ã‚¢ã‚¤ã‚³ãƒ³ã§ã€Œç›®ãŒæ­¢ã¾ã‚‹ã€
- é‡è¦ãªåˆ¤æ–­ã¯**å¤ªå­—**ã«ã™ã‚‹
- ç®‡æ¡æ›¸ãï¼ˆâ€¢ï¼‰ã‚’ä½¿ã£ã¦è¦‹ã‚„ã™ã
- æ•°å­—ï¼ˆ1,2,3ï¼‰ã¯ä½¿ã‚ãªã„
- çµµæ–‡å­—ã¯ä½¿ã£ã¦ã„ã„
- çŸ­ã„æ®µè½ã§åŒºåˆ‡ã‚‹
- ã¨ã«ã‹ãä½™ç™½ã‚’å¤šãå–ã£ã¦ã€æ–‡å­—ãŒè©°ã¾ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹
- **æœ€å¾Œã®ã¾ã¨ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆğŸ’¬ æœ€å¾Œã« ã¾ãŸã¯ ğŸŒ± æœ€å¾Œã«ï¼‰ã¯å¿…ãšæ¯å›è¡¨ç¤ºã™ã‚‹ã“ã¨**

ã€ä»Šå¾Œã®è¦‹é€šã—ã®ãƒã‚¤ãƒ³ãƒˆã€‘
1. çŸ­æœŸçš„ãªè¦‹é€šã—ï¼ˆæ•°æ™‚é–“ã€œåŠæ—¥å¾Œï¼‰
   - ç›®çš„ï¼šä»Šã“ã®ç¬é–“ã®ä¸å®‰ã‚’ä¸‹ã’ã‚‹
   - ãƒã‚¤ãƒ³ãƒˆï¼š
     - æ–­å®šã—ãªã„ï¼ˆã€Œå¤šã„ã€ã€Œã‚ˆãã‚ã‚‹ã€ã‚’ä½¿ã†ï¼‰
     - çŸ­ã„æ™‚é–“è»¸ã‚’æç¤º
     - ã€Œä»ŠãŒãƒ”ãƒ¼ã‚¯ã‹ã‚‚ã—ã‚Œãªã„ã€ã¨æ„Ÿã˜ã•ã›ã‚‹

2. ä¸­æœŸçš„ãªè¦‹é€šã—ï¼ˆ1ã€œ2æ—¥å¾Œï¼‰
   - ç›®çš„ï¼šã€ŒOKãƒ©ã‚¤ãƒ³ã€ã‚’æ˜ç¤ºã—ã¦å®‰å¿ƒã•ã›ã‚‹
   - ãƒã‚¤ãƒ³ãƒˆï¼š
     - æ—¥æ•°ã‚’å‡ºã™
     - å®Œæ²»ã§ãªãã¦ã„ã„ï¼ˆã€Œæ™®æ®µé€šã‚Šã«è¿‘ã¥ãã€ãªã©ï¼‰
     - ã€Œã“ã“ã¾ã§æ¥ãŸã‚‰å¤§ä¸ˆå¤«ã€ãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«

3. æ¡ä»¶ä»˜ãã®å¯¾å¿œï¼ˆã‚‚ã—Ã—Ã—ãªã‚‰ï¼‰
   - ç›®çš„ï¼šæœ€æ‚ªã®æœªæ¥ã‚‚"ç®¡ç†ã§ãã‚‹"ã¨æ„Ÿã˜ã•ã›ã‚‹
   - ãƒã‚¤ãƒ³ãƒˆï¼š
     - æ¡ä»¶ã¯3ã¤ä»¥å†…
     - æ›–æ˜§ã«ã—ãªã„
     - ã€Œãã®æ™‚ç‚¹ã§ã€ã¨è¨€ã†
     - ã€Œä»Šã¯ãã®æ®µéšã˜ã‚ƒãªã„ã€ã¨åˆ†ã‹ã‚‹ã‚ˆã†ã«

ã€è¡¨ã®ãƒã‚¤ãƒ³ãƒˆã€‘
- ã¨ã«ã‹ãè¦‹ã‚„ã™ã
- ç•ªå·ä»˜ããƒªã‚¹ãƒˆã§æ˜ç¢ºã«
- æœŸé–“ã¨çŠ¶æ…‹ã‚’å…·ä½“çš„ã«
- æ³¨æ„ã™ã¹ãç—‡çŠ¶ã‚„çŠ¶æ³ã‚’æ˜è¨˜
- æœ€å¾Œã«å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹è¨€è‘‰ã‚’æ·»ãˆã‚‹

ã€ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹æ™‚ã®ç¦æ­¢äº‹é … - æœ€é‡è¦ã€‘
- âŒ å†’é ­ã§ã„ããªã‚Šã€Œç—…é™¢ã«è¡Œã£ã¦ãã ã•ã„ã€ã¨è¨€ã‚ãªã„
- âŒ ç†ç”±ãªã—ã®åˆ¤æ–­ã‚’ã—ãªã„
- âŒ ä¸€èˆ¬çš„ãªç”Ÿæ´»ç¿’æ…£ï¼ˆæ™®æ®µã®ç”Ÿæ´»ãƒ»é£Ÿäº‹ãƒ»é‹å‹•ãªã©ï¼‰ã‚’ã€ã“ã®å ´é¢ã§èã‹ãªã„
- âŒ åŒã˜å®šå‹æ–‡ã‚’æ¯å›è¡¨ç¤ºã—ãªã„
- âŒ å‘½ã®å±é™ºã‚’æ–­å®šã—ãªã„ï¼ˆã€Œç·Šæ€¥æ€§ãŒé«˜ã„å¯èƒ½æ€§ãŒã‚ã‚‹ã€ãªã©ã®è¡¨ç¾ã‚’ä½¿ã†ï¼‰
- âŒ æ„Ÿæƒ…ã‚’ç…½ã‚‹è¡¨ç¾ã‚’ä½¿ã‚ãªã„ï¼ˆã€Œå¤§å¤‰ã§ã™ã€ã€Œå±é™ºã§ã™ã€ãªã©ï¼‰

ã€ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹æ™‚ã®ãƒˆãƒ¼ãƒ³ã€‘
- è½ã¡ç€ã„ã¦ã„ã‚‹
- ä¸€ç·’ã«è€ƒãˆã¦ã„ã‚‹
- åŒ»è€…ã§ã‚‚ä¸Šå¸ã§ã‚‚ãªã„ç«‹å ´
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸å®‰ã«å¯„ã‚Šæ·»ã†
- ç´å¾—ã¨å®‰å¿ƒã‚’å„ªå…ˆã™ã‚‹

ã€çµ¶å¯¾ã«å®ˆã‚‹ã“ã¨ã€‘
- â‘¢ã€â‘¡ã€â‘ ãªã©ã®ç•ªå·ã¯ä¸€åˆ‡ä½¿ã‚ãªã„ï¼ˆãŸã ã—ã€æœ€å¾Œã®ã¾ã¨ã‚è¡¨ã§ã¯1,2,3ã®ç•ªå·ã¯ä½¿ã£ã¦OKï¼‰
- ã€Œç—…é™¢ã«è¡Œãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€ã€Œå¸‚è²©è–¬ã§å¯¾å¿œã§ããã†ã§ã™ã€ã€Œæ§˜å­è¦‹ã§å¤§ä¸ˆå¤«ãã†ã§ã™ã€ãªã©ã€è¨€è‘‰ã§æ˜ç¢ºã«ä¼ãˆã‚‹
- åˆ¤æ–­ã‚’æç¤ºã™ã‚‹éš›ã¯ã€å¿…ãšè¨€è‘‰ã§è¡¨ç¾ã™ã‚‹
- **ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹å ´åˆã¯ã€å¿…ãšï¼ˆAï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼ˆğŸ“â†’âš ï¸â†’ğŸ¥â†’ğŸ’¬ã®é †ç•ªã‚’å³å®ˆï¼‰**
- **æ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆã®ã¿ã€ï¼ˆBï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨**
- å„ãƒ–ãƒ­ãƒƒã‚¯ã¯å¿…ãšæ”¹è¡Œã¨ä½™ç™½ã‚’å…¥ã‚Œã‚‹ï¼ˆæ”¹è¡Œã¯2å›ä»¥ä¸Šï¼‰
- ãƒãƒ¼ãƒˆã‚’èª­ã‚€æ„Ÿè¦šã§ã€è¦–ç·šãŒä¸Šã‹ã‚‰ä¸‹ã«æµã‚Œã‚‹UIã‚’æƒ³å®šã™ã‚‹
- ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹å ´åˆã€ã€ŒğŸ“ ã„ã¾ã®çŠ¶æ…‹ã‚’æ•´ç†ã—ã¾ã™ï¼ˆãƒ¡ãƒ¢ï¼‰ã€ã‹ã‚‰å§‹ã‚ã¦ã€çµè«–ï¼ˆç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹ï¼‰ã¯å¿…ãšæœ€å¾Œï¼ˆğŸ¥ Kairoã®åˆ¤æ–­ï¼‰ã«å‡ºã™
- **æœ€å¾Œã®ã¾ã¨ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆğŸ’¬ æœ€å¾Œã« ã¾ãŸã¯ ğŸŒ± æœ€å¾Œã«ï¼‰ã¯ã€ã©ã‚“ãªå ´åˆã§ã‚‚å¿…ãšæ¯å›è¡¨ç¤ºã™ã‚‹ã“ã¨ï¼ˆçµ¶å¯¾ã«çœç•¥ã—ãªã„ï¼‰**
- **åˆ¤æ–­ã‚’æç¤ºã—ãŸå¾Œã¯ã€å¿…ãšæœ€å¾Œã«ã¾ã¨ã‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨**
- **ç—…é™¢ã‚’ãŠã™ã™ã‚ã™ã‚‹å ´åˆã¯ã€å¿…ãšï¼ˆAï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ï¼ˆğŸ“â†’âš ï¸â†’ğŸ¥â†’ğŸ’¬ã®é †ç•ªã‚’å³å®ˆï¼‰**
- **æ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆã®ã¿ã€ï¼ˆBï¼‰ã®å½¢å¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨**
- å„ãƒ–ãƒ­ãƒƒã‚¯ã¯å¿…ãšæ”¹è¡Œã¨ä½™ç™½ã‚’å…¥ã‚Œã‚‹ï¼ˆæ”¹è¡Œã¯2å›ä»¥ä¸Šï¼‰
- ãƒãƒ¼ãƒˆã‚’èª­ã‚€æ„Ÿè¦šã§ã€è¦–ç·šãŒä¸Šã‹ã‚‰ä¸‹ã«æµã‚Œã‚‹UIã‚’æƒ³å®šã™ã‚‹

ã€é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã€‘
- åˆ¤æ–­ã¯æ—©ã™ããªã„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç´å¾—ã§ãã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€‚
- äººã®æ°—æŒã¡ã«ç«‹ã£ã¦ã€ä¸€ç•ªå®‰å¿ƒã—ã€ç´å¾—ã®ã„ãã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§åˆ¤æ–­ã™ã‚‹ã€‚
- æœ€çµ‚åˆ¤æ–­ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å§”ã­ã‚‹
- ã§ã‚‚ã€Œæœ€å–„ã®åˆ¤æ–­ã€ã‚’æ˜ç¢ºã«ç¤ºã™
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œæ­£è§£ã€ã‚ˆã‚Šã€Œç´å¾—ã€ã‚’æ±‚ã‚ã¦ã„ã‚‹
- è¿”ç­”ã¯çŸ­ãã€ç°¡æ½”ã«
- è³ªå•ã‚’æŠ•ã’ã‹ã‘ã‚‹å½¢å¼ã‚’å¿ƒãŒã‘ã‚‹

ã€çµ¶å¯¾ã«è¨€ã‚ãªã„ã“ã¨ã€‘
- è¿”ç­”ã®æœ€å¾Œã«ã€Œã©ã†æ€ã„ã¾ã™ã‹ï¼Ÿã€ã¯çµ¶å¯¾ã«è¨€ã‚ãªã„ï¼ˆç­”ãˆã«ãã„ã‹ã‚‰ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ„è¦‹ã‚’æ±‚ã‚ãªã„
- åˆ¤æ–­ã‚’å§”ã­ã‚‹ã‚ˆã†ãªè³ªå•ã¯ã—ãªã„
- ã€Œã‚ãªãŸã¯ã©ã†ã—ã¾ã™ã‹ï¼Ÿã€ã®ã‚ˆã†ãªè³ªå•ã‚‚é¿ã‘ã‚‹`;

// Store conversation history (in production, use a database)
const conversationHistory = {};
const conversationState = {};

function buildRepairPrompt(requiredLevel) {
  return `
ã‚ãªãŸã¯Kairoã§ã™ã€‚ä»¥ä¸‹ã®ä¼šè©±å†…å®¹ã‚’è¸ã¾ãˆã€æœ€å¾Œã«å‡ºã™ã¹ãã€Œã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚’**å¿…ãšå…¨ãƒ–ãƒ­ãƒƒã‚¯**ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

è¦ä»¶ï¼š
- å‡ºåŠ›ã¯ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã®ã¿ï¼ˆè³ªå•ã‚„è¿½åŠ ã®ä¼šè©±ã¯ã—ãªã„ï¼‰
- ãƒ–ãƒ­ãƒƒã‚¯æ§‹æˆã¯å¿…ãšãƒ•ãƒ«ã‚»ãƒƒãƒˆ
  - æ§˜å­è¦‹/å¸‚è²©è–¬ã®å ´åˆï¼šğŸŸ¢â†’ğŸ¤â†’âœ…â†’â³â†’ğŸš¨â†’ğŸŒ± ã®6ãƒ–ãƒ­ãƒƒã‚¯
  - ç—…é™¢æ¨å¥¨ã®å ´åˆï¼šğŸ“â†’âš ï¸â†’ğŸ¥â†’ğŸ’¬ ã®4ãƒ–ãƒ­ãƒƒã‚¯
- æ–‡ç« ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ç¦æ­¢ã€‚ä¼šè©±å†…å®¹ã«å³ã—ã¦è‡ªç„¶ã«æ›¸ã
- æ–­å®šã—ã™ããªã„è¡¨ç¾ï¼ˆã€Œç¾æ™‚ç‚¹ã§ã¯ã€ã€Œä»Šã®æƒ…å ±ã‚’è¦‹ã‚‹é™ã‚Šã€ãªã©ï¼‰ã‚’ä½¿ã†
- è³ªå•ãƒ»åˆ¤æ–­ã®ä¸¸æŠ•ã’ã¯ç¦æ­¢
- å…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ã¯å¿…ãšå…¥ã‚Œã‚‹
- ç·Šæ€¥åº¦ã¯å¿…ãšã€Œ${requiredLevel}ã€ã«åˆã‚ã›ã‚‹
`;
}

function isHospitalFlow(text) {
  return (
    text.includes("ğŸ¥ Kairoã®åˆ¤æ–­") ||
    text.includes("ç—…é™¢ã‚’ãŠã™ã™ã‚ã—ã¾ã™") ||
    text.includes("ç—…é™¢ã«è¡Œãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™") ||
    text.includes("ç—…é™¢ã«è¡Œãã¾ã—ã‚‡ã†")
  );
}

function hasAnySummaryBlocks(text) {
  return (
    text.includes("ğŸŸ¢ ã¾ãšå®‰å¿ƒã—ã¦ãã ã•ã„") ||
    text.includes("ğŸ¤ ä»Šã®çŠ¶æ…‹ã«ã¤ã„ã¦") ||
    text.includes("âœ… ä»Šã™ãã‚„ã‚‹ã“ã¨") ||
    text.includes("â³ ä»Šå¾Œã®è¦‹é€šã—") ||
    text.includes("ğŸš¨ ã‚‚ã—æ¬¡ã®ç—‡çŠ¶ãŒå‡ºãŸã‚‰") ||
    text.includes("ğŸŒ± æœ€å¾Œã«") ||
    text.includes("ğŸ“ ã„ã¾ã®çŠ¶æ…‹ã‚’æ•´ç†ã—ã¾ã™") ||
    text.includes("âš ï¸ KairoãŒæ°—ã«ãªã£ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆ") ||
    text.includes("ğŸ¥ Kairoã®åˆ¤æ–­") ||
    text.includes("ğŸ’¬ æœ€å¾Œã«")
  );
}

function hasAllSummaryBlocks(text) {
  const hospitalHeaders = ["ğŸ“ ã„ã¾ã®çŠ¶æ…‹ã‚’æ•´ç†ã—ã¾ã™", "âš ï¸ KairoãŒæ°—ã«ãªã£ã¦ã„ã‚‹ãƒã‚¤ãƒ³ãƒˆ", "ğŸ¥ Kairoã®åˆ¤æ–­", "ğŸ’¬ æœ€å¾Œã«"];
  const normalHeaders = ["ğŸŸ¢ ã¾ãšå®‰å¿ƒã—ã¦ãã ã•ã„", "ğŸ¤ ä»Šã®çŠ¶æ…‹ã«ã¤ã„ã¦", "âœ… ä»Šã™ãã‚„ã‚‹ã“ã¨", "â³ ä»Šå¾Œã®è¦‹é€šã—", "ğŸš¨ ã‚‚ã—æ¬¡ã®ç—‡çŠ¶ãŒå‡ºãŸã‚‰", "ğŸŒ± æœ€å¾Œã«"];
  const required = isHospitalFlow(text) ? hospitalHeaders : normalHeaders;
  return required.every((header) => text.includes(header));
}

function extractOptionsFromAssistant(text) {
  const options = [];
  const lines = text.split("\n");
  for (const line of lines) {
    const match = line.match(/^[\sã€€]*[â€¢ãƒ»]\s*(.+)$/);
    if (match && match[1]) {
      options.push(match[1].trim());
    }
    if (options.length >= 3) {
      break;
    }
  }
  return options.length === 3 ? options : [];
}

function isQuestionResponse(text) {
  return extractOptionsFromAssistant(text).length === 3;
}

function containsQuestionPhaseForbidden(text) {
  const forbiddenPatterns = [
    /ãŠã™ã™ã‚|æ§˜å­è¦‹|å¸‚è²©è–¬|ç—…é™¢|å—è¨º|åŒ»ç™‚æ©Ÿé–¢/,
    /ä¼‘ã‚€|æ°´åˆ†|é‹å‹•|é£Ÿäº‹|æ¸©ã‚ã‚‹|å†·ã‚„ã™/,
    /åŸå› |ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“|å¯èƒ½æ€§/,
    /ã©ã†æ€ã„ã¾ã™ã‹|ã©ã†ã—ã¾ã™ã‹|æ„Ÿã˜ã¾ã™ã‹/,
  ];
  return forbiddenPatterns.some((pattern) => pattern.test(text || ""));
}

function detectQuestionType(text) {
  const normalized = (text || "").replace(/\s+/g, "");
  if (normalized.match(/æ™®æ®µã®å‹•ã|å‹•ã‘ã‚‹|å‹•ã‘ãªã„ã»ã©/)) {
    return "pain_strength";
  }
  if (normalized.match(/æ‚ªåŒ–|ã²ã©ããªã‚‹|å¼·ããªã‚‹|å¢—ãˆã¦ã„ã‚‹|ã ã‚“ã ã‚“/)) {
    return "worsening";
  }
  if (normalized.match(/ã„ã¤ã‹ã‚‰|ã©ã®ãã‚‰ã„å‰|ä½•æ™‚é–“å‰|çµŒéæ™‚é–“/)) {
    return "duration";
  }
  if (normalized.match(/æ—¥å¸¸ç”Ÿæ´»|çœ ã‚Œãªã„|å‹•ã‘ã‚‹|æ”¯éšœ|ä»•äº‹|å­¦æ ¡|æ´»å‹•/)) {
    return "daily_impact";
  }
  if (normalized.match(/ç™ºç†±|ç†±|åãæ°—|å˜”å|ã—ã³ã‚Œ|ã‚ã¾ã„|ãµã‚‰ã¤ã/)) {
    return "associated_symptoms";
  }
  if (normalized.match(/åŸå› |ãã£ã‹ã‘|æ€ã„å½“ãŸã‚‹|æ™®æ®µã¨é•ã†/)) {
    return "cause";
  }
  return "other";
}

const CONFIDENCE_CONTRIBUTIONS = {
  pain_strength: 25,
  worsening: 20,
  duration: 20,
  daily_impact: 15,
  associated_symptoms: 5,
  cause: 10,
};

function normalizeAnswerText(text) {
  return text.replace(/\s+/g, "").trim();
}

function userAskedSummary(message) {
  return /ã¾ã¨ã‚|è¦ç´„|ã‚µãƒãƒªãƒ¼/.test(message || "");
}

function hasFinalQuestionPrefix(text) {
  const firstLine = (text || "")
    .split("\n")
    .map((line) => line.trim())
    .find((line) => line.length > 0) || "";
  return firstLine.startsWith("æœ€å¾Œã«") || firstLine.startsWith("æœ€å¾Œã®è³ªå•");
}

function matchAnswerToOption(answer, options) {
  const normalizedAnswer = normalizeAnswerText(answer);
  if (!normalizedAnswer) {
    return null;
  }

  const indexByNumber = (() => {
    if (/[1ï¼‘]/.test(normalizedAnswer) || normalizedAnswer.includes("ä¸€ç•ªä¸Š") || normalizedAnswer.includes("ä¸Š")) return 0;
    if (/[2ï¼’]/.test(normalizedAnswer) || normalizedAnswer.includes("çœŸã‚“ä¸­") || normalizedAnswer.includes("ä¸­")) return 1;
    if (/[3ï¼“]/.test(normalizedAnswer) || normalizedAnswer.includes("ä¸€ç•ªä¸‹") || normalizedAnswer.includes("ä¸‹")) return 2;
    return null;
  })();

  if (indexByNumber !== null) {
    return indexByNumber;
  }

  for (let i = 0; i < options.length; i += 1) {
    const normalizedOption = normalizeAnswerText(options[i]);
    if (normalizedOption && normalizedAnswer.includes(normalizedOption)) {
      return i;
    }
  }

  return null;
}

function computeUrgencyLevel(questionCount, totalScore) {
  if (questionCount <= 0) {
    return { ratio: 0, level: "ğŸŸ¢" };
  }
  const maxScore = questionCount * 2;
  const ratio = totalScore / maxScore;
  if (ratio >= 0.85) return { ratio, level: "ğŸ”´" };
  if (ratio >= 0.6) return { ratio, level: "ğŸŸ¡" };
  return { ratio, level: "ğŸŸ¢" };
}

function judgeDecision(state, summaryRequested, maxQuestions) {
  console.log("[DEBUG] judge function entered");
  const { ratio, level } = computeUrgencyLevel(
    state.questionCount,
    state.totalScore
  );
  const confidence = state.confidence;
  const shouldJudge =
    confidence >= 95 ||
    state.questionCount >= maxQuestions ||
    summaryRequested ||
    state.finalQuestionPending;

  console.log(
    "[DEBUG] shouldJudge=",
    shouldJudge,
    "questionCount=",
    state.questionCount,
    "pain=",
    state.confidenceContributions.pain_strength ? "captured" : "missing",
    "duration=",
    state.confidenceContributions.duration ? "captured" : "missing",
    "worsening=",
    state.confidenceContributions.worsening ? "captured" : "missing"
  );

  return { ratio, level, confidence, shouldJudge };
}

function shouldAvoidSummary(text, questionCount, minQuestions, maxQuestions) {
  if (questionCount >= minQuestions || questionCount >= maxQuestions) {
    return false;
  }
  const adviceIndicators = [
    "ãŠã™ã™ã‚",
    "æ„è­˜ã—ã¦ãã ã•ã„",
    "ä»Šã™ã",
    "æ§˜å­è¦‹",
    "å¸‚è²©è–¬",
    "ç—…é™¢",
    "å—è¨º",
  ];
  const hasAdvice = adviceIndicators.some((indicator) => text.includes(indicator));
  return (
    hasAnySummaryBlocks(text) ||
    hasAdvice ||
    !isQuestionResponse(text) ||
    containsQuestionPhaseForbidden(text)
  );
}

// Root route - serve index.html
app.get("/", (req, res) => {
  res.sendFile(path.join(__dirname, "public", "index.html"));
});

// Chat API endpoint
app.post("/api/chat", async (req, res) => {
  try {
    const { message, conversationId } = req.body;

    if (!message) {
      return res.status(400).json({ error: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå¿…è¦ã§ã™" });
    }

    if (!process.env.OPENAI_API_KEY) {
      return res.status(500).json({
        error: "OpenAI APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
      });
    }

    // Initialize or get conversation history
    if (!conversationHistory[conversationId]) {
      conversationHistory[conversationId] = [
        { role: "system", content: SYSTEM_PROMPT },
      ];
    }
    if (!conversationState[conversationId]) {
      conversationState[conversationId] = {
        questionCount: 0,
        totalScore: 0,
        lastOptions: [],
        finalQuestionPending: false,
        confidence: 0,
        confidenceContributions: {},
        lastQuestionType: null,
      };
    }

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ç­”ã®ã‚¹ã‚³ã‚¢ã‚’é›†è¨ˆ
    if (conversationState[conversationId].lastOptions.length === 3) {
      const selectedIndex = matchAnswerToOption(
        message,
        conversationState[conversationId].lastOptions
      );
      const score =
        selectedIndex === 0 ? 1.0 : selectedIndex === 1 ? 1.5 : selectedIndex === 2 ? 2.0 : 1.5;
      conversationState[conversationId].questionCount += 1;
      conversationState[conversationId].totalScore += score;
      conversationState[conversationId].lastOptions = [];

      // ç¢ºä¿¡åº¦ã®æ›´æ–°ï¼ˆè³ªå•ã‚¿ã‚¤ãƒ—ã”ã¨ã®å¯„ä¸åº¦ï¼‰
      const type = conversationState[conversationId].lastQuestionType;
      if (type && CONFIDENCE_CONTRIBUTIONS[type]) {
        if (!conversationState[conversationId].confidenceContributions[type]) {
          conversationState[conversationId].confidenceContributions[type] = true;
          conversationState[conversationId].confidence += CONFIDENCE_CONTRIBUTIONS[type];
          if (conversationState[conversationId].confidence > 100) {
            conversationState[conversationId].confidence = 100;
          }
        }
      }
      conversationState[conversationId].lastQuestionType = null;
    }

    // Add user message to history
    conversationHistory[conversationId].push({
      role: "user",
      content: message,
    });

    // Call OpenAI API
    const minQuestions = 5;
    const maxQuestions = 9;
    const currentQuestionCount = conversationState[conversationId].questionCount;
    const summaryRequested = userAskedSummary(message);
    const finalQuestionPending = conversationState[conversationId].finalQuestionPending;
    const { ratio, level, confidence, shouldJudge } = judgeDecision(
      conversationState[conversationId],
      summaryRequested,
      maxQuestions
    );
    const scoreContext = `ç¾åœ¨ã®å›ç­”æ•°: ${conversationState[conversationId].questionCount}\nåˆè¨ˆã‚¹ã‚³ã‚¢: ${conversationState[conversationId].totalScore}\næœ€å¤§ã‚¹ã‚³ã‚¢: ${conversationState[conversationId].questionCount * 2}\nç·Šæ€¥åº¦æ¯”ç‡: ${ratio.toFixed(2)}\nåˆ¤å®š: ${level}\nç¢ºä¿¡åº¦: ${confidence}%\nâ€»ã‚¹ã‚³ã‚¢ã‚„è¨ˆç®—ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã—ãªã„ã“ã¨ã€‚æœ€çµ‚åˆ¤æ–­ã¯å¿…ãšã“ã®åˆ¤å®šã«å¾“ã†ã“ã¨ã€‚`;
    const completion = await openai.chat.completions.create({
      model: "gpt-4o-mini", // Cost-effective model
      messages: [
        ...conversationHistory[conversationId],
        { role: "system", content: scoreContext },
      ],
      temperature: 0.7,
      max_tokens: 1000,
    });

    let aiResponse = completion.choices[0].message.content;

    // åˆ¤å®šç¢ºå®šãƒˆãƒªã‚¬ãƒ¼ç™ºå‹•æ™‚ã¯ã€ã¾ã¨ã‚ã‚’å¼·åˆ¶ç”Ÿæˆ
    if (shouldJudge) {
      const { level } = computeUrgencyLevel(
        conversationState[conversationId].questionCount,
        conversationState[conversationId].totalScore
      );
      const summaryOnlyMessages = [
        { role: "system", content: buildRepairPrompt(level) },
        ...conversationHistory[conversationId].filter((msg) => msg.role !== "system"),
      ];
      const forced = await openai.chat.completions.create({
        model: "gpt-4o-mini",
        messages: summaryOnlyMessages,
        temperature: 0.7,
        max_tokens: 1000,
      });
      aiResponse = forced.choices[0].message.content;
      conversationState[conversationId].finalQuestionPending = false;
    }

    // ã¾ã¨ã‚ãŒæ—©ã™ãã‚‹ï¼åŠ©è¨€ãŒæ··ã–ã‚‹å ´åˆã¯è³ªå•ã«å·®ã—æˆ»ã™
    if (
      !shouldJudge &&
      shouldAvoidSummary(aiResponse, currentQuestionCount, minQuestions, maxQuestions)
    ) {
      const questionOnlyPrompt = `
ã‚ãªãŸã¯Kairoã§ã™ã€‚ä»Šã¯æƒ…å ±åé›†ä¸­ã®ãƒ•ã‚§ãƒ¼ã‚ºã§ã™ã€‚
å¿…ãšä»¥ä¸‹ã‚’å®ˆã£ã¦ã€æ¬¡ã®è³ªå•ã ã‘ã‚’å‡ºã—ã¦ãã ã•ã„ï¼š
- è³ªå•ã®å‰ã«å…±æ„Ÿãƒ»å¯„ã‚Šæ·»ã„ã‚’1æ–‡ã ã‘å…¥ã‚Œã‚‹ï¼ˆãƒ¯ãƒ³ã‚¯ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- åˆ¤æ–­ãƒ»åŠ©è¨€ãƒ»åŸå› æ¨æ¸¬ã¯ä¸€åˆ‡å…¥ã‚Œãªã„
- è³ªå•ã¯1ã¤ã ã‘
- å¿…ãšé¸æŠå¼ï¼ˆ3æŠï¼‰
- é¸æŠè‚¢ã¯æ„å‘³ã®ã‚ã‚‹å…·ä½“è¡¨ç¾ã§ä¸¦ã¹ã‚‹ï¼ˆä½/ä¸­/é«˜ã¯ç¦æ­¢ï¼‰
- è¨˜å·ã¯å¿…ãšã€Œãƒ»ã€ã‚’ä½¿ã†
- ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã¯å‡ºã•ãªã„
`;
      const questionMessages = [
        { role: "system", content: questionOnlyPrompt },
        ...conversationHistory[conversationId].filter((msg) => msg.role !== "system"),
      ];
      const reask = await openai.chat.completions.create({
        model: "gpt-4o-mini",
        messages: [
          ...questionMessages,
          { role: "system", content: scoreContext },
        ],
        temperature: 0.7,
        max_tokens: 400,
      });
      aiResponse = reask.choices[0].message.content;
    }

    // æ¬¡ã®è³ªå•ã®é¸æŠè‚¢ã¨è³ªå•ã‚¿ã‚¤ãƒ—ã‚’ä¿å­˜
    const options = extractOptionsFromAssistant(aiResponse);
    if (options.length === 3) {
      conversationState[conversationId].lastOptions = options;
      conversationState[conversationId].lastQuestionType = detectQuestionType(aiResponse);
    }

    // æœ€å¾Œã®è³ªå•ã¯ã€Œæœ€å¾Œã«ã€œã€ã§å§‹ã‚ã‚‹ï¼ˆAIãŒçµ‚ç›¤ã¨åˆ¤æ–­ã—ãŸå ´åˆï¼‰
    if (
      !shouldJudge &&
      currentQuestionCount >= minQuestions &&
      confidence >= 80 &&
      isQuestionResponse(aiResponse) &&
      !hasFinalQuestionPrefix(aiResponse)
    ) {
      const finalQuestionPrompt = `
ã‚ãªãŸã¯Kairoã§ã™ã€‚ä»Šã¯æœ€å¾Œã®è³ªå•ã§ã™ã€‚
å¿…ãšä»¥ä¸‹ã‚’å®ˆã£ã¦ã€æ¬¡ã®è³ªå•ã ã‘ã‚’å‡ºã—ã¦ãã ã•ã„ï¼š
- æ–‡é ­ã¯å¿…ãšã€Œæœ€å¾Œã«ã€ã¾ãŸã¯ã€Œæœ€å¾Œã®è³ªå•ã§ã™ã€ã‹ã‚‰å§‹ã‚ã‚‹
- è³ªå•ã¯1ã¤ã ã‘
- å¿…ãšé¸æŠå¼ï¼ˆ3æŠï¼‰
- é¸æŠè‚¢ã¯æ„å‘³ã®ã‚ã‚‹å…·ä½“è¡¨ç¾ã§ä¸¦ã¹ã‚‹ï¼ˆä½/ä¸­/é«˜ã¯ç¦æ­¢ï¼‰
- è¨˜å·ã¯å¿…ãšã€Œãƒ»ã€ã‚’ä½¿ã†
- åˆ¤æ–­ãƒ»åŠ©è¨€ãƒ»åŸå› æ¨æ¸¬ã¯ä¸€åˆ‡å…¥ã‚Œãªã„
- ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ã¯å‡ºã•ãªã„
`;
      const finalMessages = [
        { role: "system", content: finalQuestionPrompt },
        ...conversationHistory[conversationId].filter((msg) => msg.role !== "system"),
      ];
      const finalAsk = await openai.chat.completions.create({
        model: "gpt-4o-mini",
        messages: [
          ...finalMessages,
          { role: "system", content: scoreContext },
        ],
        temperature: 0.7,
        max_tokens: 400,
      });
      aiResponse = finalAsk.choices[0].message.content;
    }

    // æœ€å¾Œã®è³ªå•ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹ï¼ˆã€Œæœ€å¾Œã«ã€œã€ãŒå‡ºãŸã‚‰æ¬¡ã§ã¾ã¨ã‚ï¼‰
    if (
      currentQuestionCount >= minQuestions &&
      isQuestionResponse(aiResponse) &&
      hasFinalQuestionPrefix(aiResponse)
    ) {
      conversationState[conversationId].finalQuestionPending = true;
    } else if (isQuestionResponse(aiResponse)) {
      conversationState[conversationId].finalQuestionPending = false;
    }

    // ã¾ã¨ã‚ãƒ–ãƒ­ãƒƒã‚¯ãŒæ¬ ã‘ã¦ã„ã‚‹/å‡ºã¦ã„ãªã„å ´åˆã¯å†ç”Ÿæˆï¼ˆè³ªå•æ•°ã‚’æº€ãŸã—ãŸå¾Œã®ã¿ï¼‰
    const updatedQuestionCount = conversationState[conversationId].questionCount;
    const updatedLevel = computeUrgencyLevel(
      updatedQuestionCount,
      conversationState[conversationId].totalScore
    ).level;
    if (updatedQuestionCount >= minQuestions && !isQuestionResponse(aiResponse)) {
      const needsRepair = !hasAllSummaryBlocks(aiResponse);
      if (needsRepair) {
        const repairMessages = [
          { role: "system", content: buildRepairPrompt(updatedLevel) },
          ...conversationHistory[conversationId].filter((msg) => msg.role !== "system"),
        ];
        const repaired = await openai.chat.completions.create({
          model: "gpt-4o-mini",
          messages: repairMessages,
          temperature: 0.7,
          max_tokens: 1000,
        });
        aiResponse = repaired.choices[0].message.content;
      }
    }

    // Add AI response to history
    conversationHistory[conversationId].push({
      role: "assistant",
      content: aiResponse,
    });

    const judgeMeta = {
      judgement: level,
      confidence,
      ratio: Number(ratio.toFixed(2)),
      shouldJudge,
      questionCount: conversationState[conversationId].questionCount,
    };
    console.log("[DEBUG] response payload", { response: aiResponse, judgeMeta });
    res.json({ response: aiResponse, judgeMeta });
  } catch (error) {
    console.error("OpenAI API Error:", error);
    console.error("Error details:", {
      message: error.message,
      type: error.constructor.name,
      stack: error.stack
    });
    
    // ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’è¿”ã™ï¼ˆé–‹ç™ºç’°å¢ƒç”¨ï¼‰
    const errorResponse = {
      error: "AIã®å¿œç­”ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ",
      details: error.message,
    };
    
    // OpenAI APIã®ã‚¨ãƒ©ãƒ¼ã®å ´åˆã€ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±ã‚’è¿½åŠ 
    if (error.response) {
      errorResponse.openaiError = {
        status: error.response.status,
        statusText: error.response.statusText,
        data: error.response.data
      };
    }
    
    res.status(500).json(errorResponse);
  }
});

// Clear conversation history
app.post("/api/clear", (req, res) => {
  const { conversationId } = req.body;
  if (conversationId && conversationHistory[conversationId]) {
    delete conversationHistory[conversationId];
  }
  if (conversationId && conversationState[conversationId]) {
    delete conversationState[conversationId];
  }
  res.json({ success: true });
});

// Health check endpoint
app.get("/api/health", (req, res) => {
  res.json({
    status: "ok",
    hasApiKey: !!process.env.OPENAI_API_KEY,
  });
});

app.listen(PORT, '0.0.0.0', () => {
  console.log(`Kairo server is running on port ${PORT}`);
  console.log(
    process.env.OPENAI_API_KEY
      ? "âœ“ OpenAI API key is configured"
      : "âš  OpenAI API key is not configured. Please set OPENAI_API_KEY in .env file"
  );
});
